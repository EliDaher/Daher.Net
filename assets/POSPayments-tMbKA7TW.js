import{r as s,k as j,v as h,l as k,j as e,D as u,s as v,B as d,p as N}from"./index-CMSnl0IB.js";import{d as S,e as C}from"./invoices-ewAqyba2.js";function q(){const[c,l]=s.useState(!1),[m]=s.useState("تأكيد الدفعة"),[t,b]=s.useState(null),[n,i]=s.useState(!1),y=j(),r=h({mutationFn:({id:a,email:x,amount:g})=>S(a,x,g),onSuccess:()=>{y.invalidateQueries({queryKey:["payment-table"]})}}),{data:o,isLoading:f}=k({queryKey:["payment-table"],queryFn:C}),p=[{key:"_id",label:"المعرف",sortable:!0,hidden:!0},{key:"destination",label:"الوجهة",sortable:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"operator",label:"العملية",sortable:!0},{key:"amount",label:"المبلغ",sortable:!0},{key:"noticeNumber",label:"ملاحظة",sortable:!0},{key:"date",label:"التاريخ",sortable:!0},{key:"isConfirmed",label:"الحالة",sortable:!0},{key:"createdAt",label:"تاريخ العملية",sortable:!0}];return f?e.jsx(u,{children:e.jsx("div",{dir:"rtl",className:"space-y-6 text-center text-lg font-semibold",children:"جارِ تحميل البيانات..."})}):e.jsxs(u,{children:[e.jsx(v,{isOpen:c,setIsOpen:l,title:m,trigger:e.jsx(e.Fragment,{}),children:e.jsx("div",{className:"flex flex-row-reverse gap-2",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),i(!0),t&&r.mutate({id:t._id,email:t.name,amount:t.amount}),l(!1),i(!1)},className:"space-y-4 w-full",children:[t&&e.jsxs("p",{className:"text-right",children:["هل تريد تأكيد الدفعة بقيمة ",t.amount," للمستخدم ",e.jsx("strong",{className:"text-lg",children:t.name})]}),e.jsx(d,{disabled:!!n,type:"submit",children:n?"تأكيد قبول الدفعة":"جاري التأكيد"})]})})}),e.jsx("div",{dir:"rtl",className:"space-y-6",children:e.jsx(N,{title:"دفعات نقاط البيع",description:"",columns:p,data:o||[],renderRowActions:a=>e.jsx(d,{disabled:!!r.isPending,variant:a.isConfirmed?"default":"destructive",className:"capitalize",onClick:()=>{b(a),l(!0)},children:r.isPending?"...":a.isConfirmed?"تم التأكيد":"بحاجة الى تأكيد"})})})]})}export{q as default};
