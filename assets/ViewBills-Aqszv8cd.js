import{r as c,i as j,j as s,D as f,C as g,m as u,n as v,ag as C,o as w,ah as N,B as n,J as o}from"./index-D9muoeqs.js";function B(){const[l,i]=c.useState([]),d=async()=>{try{const e=await o.get("http://localhost:5000/api/invoice/viewBills");console.log(e.data),i(e.data)}catch(e){console.error(e)}},x=async e=>{var r,a;try{if(!window.confirm("هل انت متاكد من حذف الفاتورة؟"))return;await o.delete(`http://localhost:5000/api/invoice/delete-bill/${e}`),alert("تم حذف الفاتورة بنجاح"),i(m=>m.filter(p=>p._id!==e))}catch(t){console.error(t),alert(((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"حدث خطأ أثناء الحذف")}};c.useEffect(()=>{d()},[]);const h=j();return s.jsx(f,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map((e,r)=>s.jsxs(g,{children:[s.jsxs(u,{children:[s.jsxs(v,{children:["فاتورة : ",e.customerName]}),s.jsx(C,{children:r+1})]}),s.jsxs(w,{children:[s.jsxs("p",{className:"font-bold mb-2",children:["المجموع: ",e.total," $"]}),s.jsx("div",{className:"space-y-2",children:e.items.map(a=>s.jsxs("div",{className:"flex justify-between text-sm border-b pb-1",children:[s.jsx("span",{children:a.name}),s.jsxs("span",{children:[a.price,"$ × ",a.stock]})]},a._id))})]}),s.jsxs(N,{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString()}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(n,{size:"sm",onClick:()=>h(`/viewBills/${e._id}`),children:"عرض"}),s.jsx(n,{size:"sm",variant:"destructive",onClick:()=>x(e._id),children:"حذف"})]})]})]},e._id))})})}export{B as default};
