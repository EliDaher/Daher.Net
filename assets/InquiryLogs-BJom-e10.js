import{k as y,r as n,l as p,j as o,D as g,p as d}from"./index-CPNwSYe_.js";import{g as f}from"./reports-CHHJxr-i.js";import{l as k}from"./index-BLRFddlS.js";function j(){var l,u;const a=y(),r=n.useRef(null),{data:s}=p({queryKey:["logs-table"],queryFn:f});n.useEffect(()=>(r.current=k("https://paynet-1.onrender.com",{transports:["websocket"]}),r.current.on("createLog",e=>{a.setQueryData(["logs-table"],t=>t?{logs:[e,...t.logs].sort((m,b)=>b.timestamp-m.timestamp)}:{logs:[e]})}),()=>{var e,t;(e=r.current)==null||e.off("createLog"),(t=r.current)==null||t.disconnect()}),[a]);const i=((u=(l=s==null?void 0:s.logs)==null?void 0:l.slice())==null?void 0:u.sort((e,t)=>t.timestamp-e.timestamp))||[],c=[{key:"id",label:"المعرف",sortable:!0,hidden:!0},{key:"from",label:"من",sortable:!0},{key:"target",label:"الى",sortable:!0},{key:"message",label:"التفاصيل",sortable:!0},{key:"date",label:"التاريخ",sortable:!0},{key:"time",label:"الوقت",sortable:!0},{key:"type",label:"النوع",sortable:!0}];return o.jsx(g,{children:o.jsx("div",{dir:"rtl",children:o.jsx(d,{title:"Logs",data:i,columns:c})})})}export{j as default};
