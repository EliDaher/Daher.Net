import{r as n,q as j,j as e,w as c}from"./index-DV4i0p-p.js";import{C as f,a as g,b as u,e as v,c as C,d as w}from"./card-MD2sYPx0.js";import{D as y}from"./DashboardLayout-4Alh9ZiJ.js";import{B as o}from"./button-C5YtQN4g.js";import"./house--oSBooNa.js";function $(){const[d,i]=n.useState([]),l=async()=>{try{const s=await c.get("https://paynet-1.onrender.com/api/invoice/viewBills");console.log(s.data),i(s.data)}catch(s){console.error(s)}},m=async s=>{var r,a;try{if(!window.confirm("هل انت متاكد من حذف الفاتورة؟"))return;await c.delete(`https://paynet-1.onrender.com/api/invoice/delete-bill/${s}`),alert("تم حذف الفاتورة بنجاح"),i(p=>p.filter(h=>h._id!==s))}catch(t){console.error(t),alert(((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"حدث خطأ أثناء الحذف")}};n.useEffect(()=>{l()},[]);const x=j();return e.jsx(y,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((s,r)=>e.jsxs(f,{children:[e.jsxs(g,{children:[e.jsxs(u,{children:["فاتورة : ",s.customerName]}),e.jsx(v,{children:r+1})]}),e.jsxs(C,{children:[e.jsxs("p",{className:"font-bold mb-2",children:["المجموع: ",s.total," $"]}),e.jsx("div",{className:"space-y-2",children:s.items.map(a=>e.jsxs("div",{className:"flex justify-between text-sm border-b pb-1",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{children:[a.price,"$ × ",a.stock]})]},a._id))})]}),e.jsxs(w,{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{size:"sm",onClick:()=>x(`/viewBills/${s._id}`),children:"عرض"}),e.jsx(o,{size:"sm",variant:"destructive",onClick:()=>m(s._id),children:"حذف"})]})]})]},s._id))})})}export{$ as default};
