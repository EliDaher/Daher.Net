import{r as s,g as j,j as e}from"./index-BKguLu9t.js";import{D as h}from"./DataTable-PDf8GxgZ.js";import{D as m}from"./DashboardLayout-BFhYKwyU.js";import{B as u}from"./button-DpKtpTNt.js";import{P as k}from"./PopupForm-CQRMWIA6.js";import{b as v,d as N}from"./invoices-BHYzYkSJ.js";import{u as P}from"./useQuery-DygMYzmI.js";import{u as S}from"./useMutation-RcSKqZic.js";import"./card-z6DlzwnM.js";import"./input-PKocyVEo.js";import"./house-YyitGq4U.js";import"./axios-KE4dpIQc.js";import"./index-xsH4HHeE.js";function M(){const[d,r]=s.useState(!1),[c]=s.useState("تأكيد الدفعة"),[t,p]=s.useState(null),[l,o]=s.useState(!1),b=j(),i=S({mutationFn:({id:a,email:x,amount:g})=>v(a,x,g),onSuccess:()=>{b.invalidateQueries({queryKey:["done-table"]})}}),{data:n,isLoading:f}=P({queryKey:["payment-table"],queryFn:N}),y=[{key:"_id",label:"المعرف",sortable:!0,hidden:!0},{key:"destination",label:"الوجهة",sortable:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"operator",label:"العملية",sortable:!0},{key:"amount",label:"المبلغ",sortable:!0},{key:"noticeNumber",label:"ملاحظة",sortable:!0},{key:"date",label:"التاريخ",sortable:!0},{key:"isConfirmed",label:"الحالة",sortable:!0},{key:"createdAt",label:"تاريخ العملية",sortable:!0}];return f?e.jsx(m,{children:e.jsx("div",{dir:"rtl",className:"space-y-6 text-center text-lg font-semibold",children:"جارِ تحميل البيانات..."})}):e.jsxs(m,{children:[e.jsx(k,{isOpen:d,setIsOpen:r,title:c,trigger:e.jsx(e.Fragment,{}),children:e.jsx("div",{className:"flex flex-row-reverse gap-2",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),o(!0),t&&i.mutate({id:t._id,email:t.name,amount:t.amount}),r(!1),o(!1)},className:"space-y-4 w-full",children:[t&&e.jsxs("p",{className:"text-right",children:["هل تريد تأكيد الدفعة بقيمة ",t.amount," للمستخدم ",e.jsx("strong",{className:"text-lg",children:t.name})]}),e.jsx(u,{disabled:!!l,type:"submit",children:l?"تأكيد قبول الدفعة":"جاري التأكيد"})]})})}),e.jsx("div",{dir:"rtl",className:"space-y-6",children:e.jsx(h,{title:"دفعات نقاط البيع",description:"",columns:y,data:n||[],renderRowActions:a=>e.jsx(u,{disabled:!!i.isPending,variant:a.isConfirmed?"default":"destructive",className:"capitalize",onClick:()=>{p(a),r(!0)},children:i.isPending?"...":a.isConfirmed?"تم التأكيد":"بحاجة الى تأكيد"})})})]})}export{M as default};
