import{c as f,r as i,j as e,ak as v,B as x,M as y,D as w,p as N}from"./index-Cy6ykWzc.js";import{L as b}from"./loader-circle-BAwjHPXw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=f("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=f("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function D({product:n,onClose:d,onUpdated:u}){const[s,m]=i.useState({name:n.name||"",price:n.price||"",category:n.category||"",stock:n.stock||"",description:n.description||"",imageUrl:n.imageUrl||""}),[o,p]=i.useState(!1),h="https://paynet-1.onrender.com",r=a=>{m({...s,[a.target.name]:a.target.value})},g=async a=>{var c,t;a.preventDefault();try{p(!0);const l=await y.put(`${h}/api/product/update-product/${n._id}`,s);u(l.data)}catch(l){alert(((t=(c=l==null?void 0:l.response)==null?void 0:c.data)==null?void 0:t.message)||"حدث خطأ")}finally{p(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl p-6 relative",children:[e.jsx("button",{onClick:d,className:"absolute right-4 top-4 text-gray-500 hover:text-black",children:e.jsx(v,{})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Product"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx("input",{name:"name",value:s.name,onChange:r,placeholder:"Name",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"price",value:s.price,onChange:r,placeholder:"Price",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"category",value:s.category,onChange:r,placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"stock",value:s.stock,onChange:r,placeholder:"Stock",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"imageUrl",value:s.imageUrl,onChange:r,placeholder:"Image URL",className:"w-full border p-2 rounded"}),e.jsx("textarea",{name:"description",value:s.description,onChange:r,placeholder:"Description",className:"w-full border p-2 rounded"}),e.jsx(x,{disabled:o,className:"w-full",children:o?e.jsx(b,{className:"h-4 w-4 animate-spin"}):"Update Product"})]})]})})}function L(){const[n,d]=i.useState([]),[u,s]=i.useState(null),[m,o]=i.useState(null),p=[{key:"name",label:"Name",sortable:!0},{key:"price",label:"Price",sortable:!0},{key:"category",label:"Category"},{key:"stock",label:"Stock"},{key:"description",label:"Description"},{key:"imageUrl",label:"ImageUrl"}],h="https://paynet-1.onrender.com",r=async()=>{var a,c;try{const t=await y.get(`${h}/api/product/get-product`);console.log(t.data),d(t.data)}catch(t){console.log(t),alert(((c=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:c.message)||"حدث خطأ أثناء الحذف")}};i.useEffect(()=>{r()},[]);const g=async a=>{var c,t;try{if(!window.confirm("هل انت متاكد من حذف المنتج"))return;s(a),await y.delete(`${h}/api/product/delete-product/${a}`),alert("تم حذف المنتج بنجاح"),d(j=>j.filter(k=>k._id!==a))}catch(l){console.log(l),alert(((t=(c=l==null?void 0:l.response)==null?void 0:c.data)==null?void 0:t.message)||"حدث خطأ أثناء الحذف")}finally{s(null)}};return e.jsxs(w,{children:[m&&e.jsx(D,{product:m,onClose:()=>o(null),onUpdated:a=>{d(c=>c.map(t=>t._id===a._id?a:t)),o(null)}}),e.jsx(N,{title:"Products",description:"All available products",columns:p,data:n,renderRowActions:a=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{onClick:()=>o(a),size:"sm",variant:"outline",children:e.jsx(C,{className:"h-4 w-4"})}),e.jsx(x,{onClick:()=>g(a._id),size:"sm",variant:"destructive",disabled:u===a._id,children:u?e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(U,{className:"h-4 w-4"})})]})})]})}export{L as default};
