import{p as de,r as l,j as e,q as ie,t as ce,h as oe,i as he}from"./index-DV4i0p-p.js";import{D as xe,T as me,U as pe}from"./DashboardLayout-4Alh9ZiJ.js";import{C as Z,a as ue,b as je,c as _}from"./card-MD2sYPx0.js";import{a as ge,d as be,g as Ne}from"./wifi-dBU1tFzi.js";import{B as p,L as G}from"./button-C5YtQN4g.js";import{D as fe,S as ve}from"./DataTable-CaKyrMIV.js";import{I as ye}from"./input-CxPHs0pv.js";import{S as k,a as L,b as B,c as M,d as c}from"./select-D6vM3k95.js";import{P as z}from"./PopupForm-O5ESd3rc.js";import{F as m}from"./FormInput-DC8vWhpL.js";import{u as Se}from"./useMutation-S9fwkRF5.js";import{l as we}from"./index-BLRFddlS.js";import{P as Ce}from"./plus-BZ4tixGk.js";import{L as Pe}from"./layout-grid-CrT2icKK.js";import"./house--oSBooNa.js";import"./index-Bmo7SPvD.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=de("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function Ue(){const v={name:"",contactNumber:"",MonthlyFee:"",speed:"",userIp:"",userName:"",password:"",location:"",sender:"",dealer:""},[n,o]=l.useState(v),[t,A]=l.useState({}),[y,F]=l.useState(!1),[u,S]=l.useState(""),[b,j]=l.useState(""),d=x=>{const{id:g,value:N}=x.target;o(w=>({...w,[g]:N})),A(w=>({...w,[g]:""}))},U=()=>{const x={};return Object.entries(n).forEach(([g,N])=>{if(!N.trim()){if(g=="dealer")return;x[g]="Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨"}}),A(x),Object.keys(x).length===0},I=async x=>{if(x.preventDefault(),S(""),j(""),!!U()){F(!0);try{console.log(n),(await ge(n)).success?(S("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­"),o(v),window.location.reload()):j("âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ")}catch{j("âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±")}finally{F(!1)}}};return e.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6 max-h-[85vh] overflow-y-auto bg-white rounded-2xl shadow-md",children:[u&&e.jsx("p",{className:"bg-green-100 text-green-700 px-4 py-2 rounded-lg text-right mb-4",children:u}),b&&e.jsxs("p",{className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg text-right mb-4 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),b]}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"name",label:"Ø§Ù„Ø§Ø³Ù…",value:n.name,onChange:d,error:t.name}),e.jsx(m,{id:"contactNumber",label:"Ø±Ù‚Ù… Ø§Ù„Ø§ØªØµØ§Ù„",type:"number",value:n.contactNumber,onChange:d,error:t.contactNumber})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"MonthlyFee",label:"Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©",type:"number",value:n.MonthlyFee,onChange:d,error:t.MonthlyFee}),e.jsx(m,{id:"speed",label:"Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",type:"number",value:n.speed,onChange:d,error:t.speed})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"userIp",label:"User IP",value:n.userIp,onChange:d,error:t.userIp}),e.jsx(m,{id:"userName",label:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",value:n.userName,onChange:d,error:t.userName})]}),e.jsx(m,{id:"password",label:"ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±",type:"password",value:n.password,onChange:d,error:t.password}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"location",label:"Ø§Ù„Ù…ÙˆÙ‚Ø¹",value:n.location,onChange:d,error:t.location}),e.jsx(m,{id:"sender",label:"Ø§Ù„Ù…Ø±Ø³Ù„",value:n.sender,onChange:d,error:t.sender})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.jsx(m,{id:"dealer",label:"Ø§Ù„Ø¨Ø§Ø¦Ø¹",value:n.dealer,onChange:d,error:t.dealer})}),e.jsx("div",{className:"pt-4",children:e.jsx(p,{type:"submit",disabled:y,className:"w-full bg-green-600 hover:bg-green-700 text-white text-lg py-3 rounded-xl transition-all shadow-md flex justify-center items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):"Ø¥Ø±Ø³Ø§Ù„"})})]})]})}const O=we("https://daherserver-zgmy.onrender.com");O.emit("register","reactUser");function ke({userList:v}){const[n,o]=l.useState(!1),t=[{key:"name",label:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",sortable:!0},{key:"uptime",label:"ÙˆÙ‚Øª Ø§Ù„Ø§ØªØµØ§Ù„",sortable:!0},{key:"address",label:"IP",sortable:!0}];return e.jsx(z,{isOpen:n,setIsOpen:o,trigger:e.jsx(p,{variant:"destructive",className:"",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ†"}),children:e.jsx("div",{children:e.jsx(fe,{title:"ÙŠÙˆØ²Ø±Ø§Øª ÙØ¹Ø§Ù„Ø© Ùˆ ØºÙŠØ± Ù…Ø¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬",data:v,columns:t,pageSizeOptions:[5,10],defaultPageSize:5})})})}function Re(){const v=ie(),n=ce(),o=JSON.parse(localStorage.getItem("DaherUser")),[t,A]=l.useState(""),[y,F]=l.useState("cards"),[u,S]=l.useState(1),b=12,[j,d]=l.useState(""),[U,I]=l.useState("all"),[x,g]=l.useState("all"),[N,w]=l.useState("all"),[D,$]=l.useState("all"),[E,V]=l.useState("all"),[H,W]=l.useState(!1),[X,q]=l.useState(!1),[C,J]=l.useState(null),Y=oe(),[r,ee]=l.useState([]);l.useEffect(()=>{O.emit("getActive");const s=a=>{const P=JSON.parse(a.ActivePPP.data);ee(P)};return O.on("returnActivePPP",s),()=>{O.off("returnActivePPP",s)}},[]);const{data:i,isLoading:K}=he({queryKey:["customers-table"],queryFn:Ne}),Q=Se({mutationFn:s=>be(s),onSuccess:s=>{Y.invalidateQueries({queryKey:["customers-table"]}),q(!1),J(null)},onError:()=>{alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}});l.useEffect(()=>{n.state=="unpaid"&&V("noBalance")},[]),l.useEffect(()=>{S(1)},[j]);const h=i==null?void 0:i.filter(s=>{const a=s.Name.toLowerCase().includes(j.toLowerCase())||s.UserName.toLowerCase().includes(j.toLowerCase())||s.Contact.includes(j),P=U!=="all"?s.sender===U:!0,R=r==null?void 0:r.some(te=>te.name.includes(s.UserName)),ae=x==="all"?!0:x==="online"?R:!R,le=N!=="all"?s.SubscriptionSpeed===N:!0,re=D!=="all"?s.dealer===D:!0,ne=E==="noBalance"?s.Balance<0:E==="hasBalance"?s.Balance>0:E==="BalanceZero"?s.Balance==0:!0;return a&&P&&le&&ne&&re&&ae}),T=Math.ceil((h==null?void 0:h.length)/b),f=h==null?void 0:h.slice((u-1)*b,u*b),se=()=>{d(""),I("all"),w("all"),V("all")};return l.useEffect(()=>{o.role=="dealer"&&$(o.username)},[]),e.jsx(xe,{children:e.jsxs("div",{children:[e.jsx(z,{isOpen:H,setIsOpen:W,title:"Ø¥Ø¶Ø§ÙØ© Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯",trigger:e.jsx(e.Fragment,{children:e.jsx(p,{variant:"accent",className:"fixed bottom-4 right-5 shadow-lg rounded-full p-3",children:e.jsx(Ce,{className:"w-5 h-5"})})}),children:e.jsx(Ue,{})}),e.jsx(z,{title:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù",trigger:e.jsx(e.Fragment,{}),isOpen:X,setIsOpen:q,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row-reverse gap-2 mb-4",children:[e.jsx("p",{className:"text-right",children:"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´ØªØ±ÙƒØŸ"}),e.jsx("p",{className:"text-right font-bold",children:C==null?void 0:C.Name})]}),e.jsx(p,{onClick:s=>{s.preventDefault(),Q.mutate(C==null?void 0:C.id)},disabled:Q.isPending,children:Q.isPending?"...":"ØªØ£ÙƒÙŠØ¯"})]})}),e.jsxs("div",{dir:"rtl",className:"space-y-6",children:[e.jsxs("div",{className:"-mt-10 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:y==="cards"?"default":"outline",onClick:()=>F("cards"),children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Ø¹Ø±Ø¶ ÙƒØ¨Ø·Ø§Ù‚Ø§Øª"]}),e.jsxs(p,{variant:y==="table"?"default":"outline",onClick:()=>F("table"),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Ø¹Ø±Ø¶ ÙƒØ¬Ø¯ÙˆÙ„"]}),(o==null?void 0:o.role).includes("admin")&&e.jsx(ke,{userList:r==null?void 0:r.filter(s=>{const a=s.name.split("@")[0].trim().toLowerCase();return!i.some(P=>P.UserName.trim().toLowerCase()===a)})})]})]}),e.jsxs(Z,{children:[e.jsxs(ue,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(pe,{className:"h-6 w-6 text-muted-foreground"}),(r==null?void 0:r.length)==0||r==null?e.jsx(G,{className:"w-5 h-5 animate-spin"}):null,e.jsxs(je,{children:["Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† (",h==null?void 0:h.length,")"]})]}),e.jsxs("span",{children:["Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø±Ø¹Ø§Øª :"," ",h==null?void 0:h.reduce((s,a)=>s+ +a.SubscriptionSpeed,0)]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 px-4 pb-4",children:[e.jsx(ye,{placeholder:"ðŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",className:"w-full md:max-w-sm",value:j,onChange:s=>d(s.target.value)}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsxs(k,{value:x,onValueChange:g,children:[e.jsx(L,{className:"w-36",children:e.jsx(B,{placeholder:"Ø§Ù„Ù…Ø±Ø³Ù„"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),e.jsx(c,{value:"online",children:"Ù…ØªØµÙ„"}),e.jsx(c,{value:"offline",children:"ØºÙŠØ± Ù…ØªØµÙ„"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Ø§Ù„Ù…Ø±Ø³Ù„"}),e.jsxs(k,{value:U,onValueChange:I,children:[e.jsx(L,{className:"w-36",children:e.jsx(B,{placeholder:"Ø§Ù„Ù…Ø±Ø³Ù„"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),[...new Set(i==null?void 0:i.map(s=>{var a;return(a=s.sender)==null?void 0:a.trim()}))].filter(s=>s&&s!=="").map(s=>e.jsx(c,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Ø§Ù„Ø³Ø±Ø¹Ø©"}),e.jsxs(k,{value:N,onValueChange:w,children:[e.jsx(L,{className:"w-36",children:e.jsx(B,{placeholder:"Ø§Ù„Ø³Ø±Ø¹Ø©"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),[...new Set(i==null?void 0:i.map(s=>{var a;return(a=s.SubscriptionSpeed)==null?void 0:a.trim()}))].filter(s=>s&&s!=="").map(s=>e.jsxs(c,{value:s,children:[s," Mbps"]},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Ø§Ù„Ø¨Ø§Ø¦Ø¹"}),e.jsxs(k,{disabled:o.role=="dealer",value:D,onValueChange:$,children:[e.jsx(L,{className:"w-36",children:e.jsx(B,{placeholder:"Ø§Ù„Ø¨Ø§Ø¦Ø¹"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),[...new Set(i==null?void 0:i.map(s=>s.dealer))].filter(Boolean).map(s=>e.jsx(c,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsxs(k,{value:E,onValueChange:V,children:[e.jsx(L,{className:"w-36",children:e.jsx(B,{placeholder:"Ø§Ù„Ø±ØµÙŠØ¯"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),e.jsx(c,{value:"BalanceZero",children:"0 Ø±ØµÙŠØ¯"}),e.jsx(c,{value:"noBalance",children:"Ø¨Ø¯ÙˆÙ† Ø±ØµÙŠØ¯"}),e.jsx(c,{value:"hasBalance",children:"Ù…Ø¹ Ø±ØµÙŠØ¯"})]})]})]})]}),e.jsx(p,{variant:"ghost",onClick:se,children:"Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·"})]}),e.jsx(_,{children:K?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(b)].map((s,a)=>e.jsx(ve,{className:"h-24 w-full rounded-lg"},a))}):t?e.jsx("p",{className:"text-red-600 text-center",children:t}):(f==null?void 0:f.length)===0?e.jsx("p",{className:"text-muted-foreground text-center",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø´ØªØ±ÙƒÙŠÙ†."}):y==="cards"?e.jsx("div",{dir:"rtl",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f==null?void 0:f.map(s=>e.jsxs(Z,{className:"shadow-sm",children:[e.jsxs(_,{className:`p-4 space-y-1 ${r!=null&&r.some(a=>a.name.includes(s.UserName))?"bg-accent-950 dark:bg-accent-50":""}`,onClick:()=>{v(`/CustomerDetails/${s.id}`,{state:(r==null?void 0:r.find(a=>a.name.split("@")[0].trim().toLowerCase()===s.UserName.trim().toLowerCase()))||null})},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ø§Ø³Ù…:"})," ",s.Name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:"})," ",s.UserName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ø±ØµÙŠØ¯:"})," ",s.Balance," USD"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ù‡Ø§ØªÙ:"})," ",s.Contact]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ù…Ø±Ø³Ù„:"})," ",s.sender]}),r!=null&&r.some(a=>a.name.includes(s.UserName))?e.jsxs("p",{children:[e.jsx("strong",{children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:"})," online"]}):e.jsxs("p",{children:[e.jsx("strong",{children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:"})," offline"]})]}),o.username=="elidaher"&&e.jsx(p,{onClick:a=>{a.preventDefault(),J(s),q(!0)},variant:"destructive",className:"w-full rounded-t-none rounded-b-lg",children:"Ø­Ø°Ù"})]},s.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"#"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"border px-2 py-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø³Ø±Ø¹Ø©"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ù…Ø±Ø³Ù„"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]})}),e.jsx("tbody",{children:f.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1",children:(u-1)*b+a+1}),e.jsx("td",{className:"border px-2 py-1",children:s.Name}),e.jsx("td",{className:"border px-2 py-1",children:s.UserName}),e.jsx("td",{className:"border px-2 py-1",children:s.Password}),e.jsxs("td",{className:"border px-2 py-1",children:[s.Balance," USD"]}),e.jsxs("td",{className:"border px-2 py-1",children:[s.MonthlyFee," USD"]}),e.jsxs("td",{className:"border px-2 py-1",children:[s.SubscriptionSpeed," Mbps"]}),e.jsx("td",{className:"border px-2 py-1",children:s.Contact}),e.jsx("td",{className:"border px-2 py-1",children:s.sender}),e.jsx("td",{className:"border px-2 py-1",children:s.location})]},s.id))})]})})})]}),!K&&!t&&T>1&&e.jsxs("div",{dir:"rtl",className:"flex justify-center items-center gap-2",children:[e.jsx(p,{disabled:u===1,onClick:()=>S(s=>s-1),variant:"outline",children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{className:"text-muted-foreground",children:["ØµÙØ­Ø© ",u," Ù…Ù† ",T]}),e.jsx(p,{disabled:u===T,onClick:()=>S(s=>s+1),variant:"outline",children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})," "]})})}export{Re as default};
