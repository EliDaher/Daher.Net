import{c as k,r as u,j as e,af as I,B as v,J as w,D as U,p as D}from"./index-BvLRF96M.js";import{L as C}from"./loader-circle-f4UKhd8m.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=k("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=k("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function L({product:n,onClose:p,onUpdated:x}){const[l,g]=u.useState({name:n.name||"",price:n.price||"",category:n.category||"",stock:n.stock||"",description:n.description||"",imageUrl:n.imageUrl||""}),[y,c]=u.useState(!1),N="https://paynet-1.onrender.com",m=b=>{g({...l,[b.target.name]:b.target.value})},f=async b=>{var h,j;b.preventDefault();try{c(!0);const a=await w.put(`${N}/api/product/update-product/${n._id}`,l);x(a.data)}catch(a){alert(((j=(h=a==null?void 0:a.response)==null?void 0:h.data)==null?void 0:j.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl p-6 relative",children:[e.jsx("button",{onClick:p,className:"absolute right-4 top-4 text-gray-500 hover:text-black",children:e.jsx(I,{})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Product"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx("input",{name:"name",value:l.name,onChange:m,placeholder:"Name",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"price",value:l.price,onChange:m,placeholder:"Price",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"category",value:l.category,onChange:m,placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"stock",value:l.stock,onChange:m,placeholder:"Stock",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"imageUrl",value:l.imageUrl,onChange:m,placeholder:"Image URL",className:"w-full border p-2 rounded"}),e.jsx("textarea",{name:"description",value:l.description,onChange:m,placeholder:"Description",className:"w-full border p-2 rounded"}),e.jsx(v,{disabled:y,className:"w-full",children:y?e.jsx(C,{className:"h-4 w-4 animate-spin"}):"Update Product"})]})]})})}function $({items:n,setItems:p}){const[x,l]=u.useState(!1),[g,y]=u.useState(""),[c,N]=u.useState(""),m=(a,s)=>{p(o=>o.map(t=>t._id===a?{...t,quantity:Math.max(1,s)}:t))},f=(a,s)=>{p(o=>o.map(t=>t._id===a?{...t,price:Math.max(0,s)}:t))},b=a=>{p(s=>s.filter(o=>o._id!==a))},h=n.reduce((a,s)=>a+s.price*s.quantity,0),j=async()=>{var a,s;l(!0),console.log({items:n,total:h,customerName:g,customerPhone:c});try{const o=await w.post("https://paynet-1.onrender.com/api/invoice/create-invoice",{items:n,total:h,customerName:g,customerPhone:c});alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!")}catch(o){console.log(o),alert(((s=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:s.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©")}finally{l(!1)}};return e.jsxs("div",{className:"border rounded-xl p-4 bg-white shadow-md space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸ§¾ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),n.length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),e.jsxs("div",{children:[e.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full",value:g,onChange:a=>y(a.target.value),type:"text",required:!0,placeholder:" . . . Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"}),e.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full my-2",value:c,onChange:a=>N(a.target.value),type:"number",placeholder:" . . . Ø±Ù‚Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"})]}),n.map(a=>e.jsxs("div",{className:"grid grid-cols-5 gap-3 items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:a.name}),e.jsx("input",{type:"number",value:a.price,onChange:s=>f(a._id,Number(s.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",min:1,value:a.quantity,onChange:s=>m(a._id,Number(s.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx(v,{size:"sm",variant:"destructive",onClick:()=>b(a._id),children:e.jsx(_,{className:"h-4 w-4"})})]},a._id)),e.jsxs("div",{className:"flex justify-between border-t pt-3 font-bold",children:[e.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:"}),e.jsxs("span",{className:"text-green-600",children:[h.toFixed(2)," $"]})]}),e.jsx("button",{onClick:j,disabled:x,className:`
    w-full font-bold px-4 py-2 rounded mt-4 text-white
    ${x?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}
  `,children:x?"Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...":"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}function E(){const[n,p]=u.useState([]),[x,l]=u.useState(null),[g,y]=u.useState(null),[c,N]=u.useState(!1),[m,f]=u.useState([]),b=[{key:"name",label:"Name",sortable:!0},{key:"price",label:"Price",sortable:!0},{key:"category",label:"Category"},{key:"stock",label:"Stock"},{key:"description",label:"Description"},{key:"imageUrl",label:"ImageUrl"}],h="https://paynet-1.onrender.com",j=async()=>{var t,d;try{const r=await w.get(`${h}/api/product/get-product`);console.log(r.data),p(r.data)}catch(r){console.log(r),alert(((d=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:d.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}};u.useEffect(()=>{j()},[]);const a=async t=>{var d,r;try{if(!window.confirm("Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ§ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬"))return;l(t),await w.delete(`${h}/api/product/delete-product/${t}`),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),p(S=>S.filter(P=>P._id!==t))}catch(i){console.log(i),alert(((r=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:r.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}finally{l(null)}},s=()=>{alert(c?"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©":"ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ù† Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"),N(!c)},o=t=>{f(d=>d.find(i=>i._id===t._id)?d.map(i=>i._id===t._id?{...i,quantity:i.quantity+1}:i):[...d,{_id:t._id,name:t.name,price:t.price,quantity:1}])};return e.jsxs(U,{children:[g&&e.jsx(L,{product:g,onClose:()=>y(null),onUpdated:t=>{p(d=>d.map(r=>r._id===t._id?t:r)),y(null)}}),e.jsx("div",{className:"mb-8 p-6  rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø³Ù‡ÙˆÙ„Ø©"})]}),e.jsx(v,{onClick:()=>s(),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold px-8 py-2 rounded-lg shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105 active:scale-95",children:c?"Ø¥Ù„ØºØ§Ø¡":"Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}),e.jsx(D,{title:"Products",description:"All available products",columns:b,data:n,renderRowActions:t=>e.jsx("div",{className:"flex gap-2",children:c?e.jsx(v,{onClick:()=>o(t),size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}):e.jsxs(e.Fragment,{children:[e.jsx(v,{onClick:()=>y(t),size:"sm",variant:"outline",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(v,{onClick:()=>a(t._id),size:"sm",variant:"destructive",disabled:x===t._id,children:x?e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(_,{className:"h-4 w-4"})})]})})}),c&&e.jsx($,{items:m,setItems:f})]})}export{E as default};
