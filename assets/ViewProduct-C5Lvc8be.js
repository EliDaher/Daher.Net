import{c as w,r as p,j as e,af as W,B as v,J as N,D as U,p as D}from"./index-DjOO9HL0.js";import{L as k}from"./loader-circle-CFwsAshB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=w("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function M({product:n,onClose:d,onUpdated:m}){const[r,h]=p.useState({name:n.name||"",price:n.price||"",priceCost:n.priceCost||"",priceWolesale:n.priceWolesale||"",category:n.category||"",stock:n.stock||"",description:n.description||"",imageUrl:n.imageUrl||""}),[x,o]=p.useState(!1),j="https://paynet-1.onrender.com",c=g=>{h({...r,[g.target.name]:g.target.value})},y=async g=>{var b,f;g.preventDefault();try{o(!0);const u=await N.put(`${j}/api/product/update-product/${n._id}`,r);m(u.data)}catch(u){alert(((f=(b=u==null?void 0:u.response)==null?void 0:b.data)==null?void 0:f.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl p-6 relative",children:[e.jsx("button",{onClick:d,className:"absolute right-4 top-4 text-gray-500 hover:text-black",children:e.jsx(W,{})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Product"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("input",{name:"name",value:r.name,onChange:c,placeholder:"Name",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"price",value:r.price,onChange:c,placeholder:"Price",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"priceCost",value:r.priceCost,onChange:c,placeholder:"Price Cost",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"priceWolesale",value:r.priceWolesale,onChange:c,placeholder:"Price Wholesale",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"category",value:r.category,onChange:c,placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"stock",value:r.stock,onChange:c,placeholder:"Stock",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"imageUrl",value:r.imageUrl,onChange:c,placeholder:"Image URL",className:"w-full border p-2 rounded"}),e.jsx("textarea",{name:"description",value:r.description,onChange:c,placeholder:"Description",className:"w-full border p-2 rounded"}),e.jsx(v,{disabled:x,className:"w-full",children:x?e.jsx(k,{className:"h-4 w-4 animate-spin"}):"Update Product"})]})]})})}function q({items:n,setItems:d}){const[m,r]=p.useState(!1),[h,x]=p.useState(""),[o,j]=p.useState(""),c=(s,a)=>{d(l=>l.map(t=>t._id===s?{...t,quantity:Math.max(1,a)}:t))},y=(s,a)=>{d(l=>l.map(t=>t._id===s?{...t,price:Math.max(0,a)}:t))},g=(s,a)=>{d(l=>l.map(t=>t._id===s?{...t,priceCost:Math.max(0,a)}:t))},b=(s,a)=>{d(l=>l.map(t=>t._id===s?{...t,priceWolesale:Math.max(0,a)}:t))},f=s=>{d(a=>a.filter(l=>l._id!==s))},u=n.reduce((s,a)=>s+a.price*a.quantity,0),C=async()=>{var s,a;r(!0),console.log({items:n,total:u,customerName:h,customerPhone:o});try{const l=await N.post("https://paynet-1.onrender.com/api/invoice/create-invoice",{items:n,total:u,customerName:h,customerPhone:o});alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!")}catch(l){console.log(l),alert(((a=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:a.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©")}finally{r(!1)}};return e.jsxs("div",{className:"border rounded-xl p-4 bg-white shadow-md space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸ§¾ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),n.length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),e.jsxs("div",{children:[e.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full",value:h,onChange:s=>x(s.target.value),type:"text",required:!0,placeholder:" . . . Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"}),e.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full my-2",value:o,onChange:s=>j(s.target.value),type:"number",placeholder:" . . . Ø±Ù‚Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"})]}),n.map(s=>e.jsxs("div",{className:"grid grid-cols-7 gap-3 items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:s.name}),e.jsx("input",{type:"number",value:s.price,onChange:a=>y(s._id,Number(a.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",value:s.priceCost,onChange:a=>g(s._id,Number(a.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",value:s.priceWolesale,onChange:a=>b(s._id,Number(a.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",min:1,value:s.quantity,onChange:a=>c(s._id,Number(a.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx(v,{size:"sm",variant:"destructive",onClick:()=>f(s._id),children:e.jsx(_,{className:"h-4 w-4"})})]},s._id)),e.jsxs("div",{className:"flex justify-between border-t pt-3 font-bold",children:[e.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:"}),e.jsxs("span",{className:"text-green-600",children:[u.toFixed(2)," $"]})]}),e.jsx("button",{onClick:C,disabled:m,className:`
    w-full font-bold px-4 py-2 rounded mt-4 text-white
    ${m?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}
  `,children:m?"Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...":"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}function z(){const[n,d]=p.useState([]),[m,r]=p.useState(null),[h,x]=p.useState(null),[o,j]=p.useState(!1),[c,y]=p.useState([]),g=[{key:"name",label:"Name",sortable:!0},{key:"price",label:"Price",sortable:!0},{key:"priceCost",label:"Price Cost",sortable:!0},{key:"priceWolesale",label:"Price Wholesale",sortable:!0},{key:"category",label:"Category"},{key:"stock",label:"Stock"},{key:"description",label:"Description"},{key:"imageUrl",label:"ImageUrl"}],b="https://paynet-1.onrender.com",f=async()=>{var a,l;try{const t=await N.get(`${b}/api/product/get-product`);console.log(t.data),d(t.data)}catch(t){console.log(t),alert(((l=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:l.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}};p.useEffect(()=>{f()},[]);const u=async a=>{var l,t;try{if(!window.confirm("Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ§ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬"))return;r(a),await N.delete(`${b}/api/product/delete-product/${a}`),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),d(P=>P.filter(S=>S._id!==a))}catch(i){console.log(i),alert(((t=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:t.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}finally{r(null)}},C=()=>{alert(o?"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©":"ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ù† Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"),j(!o)},s=a=>{y(l=>l.find(i=>i._id===a._id)?l.map(i=>i._id===a._id?{...i,quantity:i.quantity+1}:i):[...l,{_id:a._id,name:a.name,price:a.price,priceCost:a.priceCost,priceWolesale:a.priceWolesale,quantity:1}])};return e.jsxs(U,{children:[h&&e.jsx(M,{product:h,onClose:()=>x(null),onUpdated:a=>{d(l=>l.map(t=>t._id===a._id?a:t)),x(null)}}),e.jsx("div",{className:"mb-8 p-6  rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø³Ù‡ÙˆÙ„Ø©"})]}),e.jsx(v,{onClick:()=>C(),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold px-8 py-2 rounded-lg shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105 active:scale-95",children:o?"Ø¥Ù„ØºØ§Ø¡":"Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}),e.jsx(D,{title:"Products",description:"All available products",columns:g,data:n,renderRowActions:a=>e.jsx("div",{className:"flex gap-2",children:o?e.jsx(v,{onClick:()=>s(a),size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}):e.jsxs(e.Fragment,{children:[e.jsx(v,{onClick:()=>x(a),size:"sm",variant:"outline",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(v,{onClick:()=>u(a._id),size:"sm",variant:"destructive",disabled:m===a._id,children:m?e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(_,{className:"h-4 w-4"})})]})})}),o&&e.jsx(q,{items:c,setItems:y})]})}export{z as default};
