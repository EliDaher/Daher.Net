import{k as y,r as n,l as p,j as r,D as g,p as d}from"./index-D9muoeqs.js";import{g as f}from"./reports-DXArlajp.js";import{l as k}from"./index-BLRFddlS.js";function q(){var a,u;const o=y(),l=n.useRef(null),{data:s}=p({queryKey:["logs-table"],queryFn:f});n.useEffect(()=>{l.current=k("http://localhost:5000",{transports:["websocket"]}),l.current.on("createLog",e=>{o.setQueryData(["logs-table"],t=>t?{logs:[e,...t.logs].sort((b,c)=>c.timestamp-b.timestamp)}:{logs:[e]})})},[o]);const i=((u=(a=s==null?void 0:s.logs)==null?void 0:a.slice())==null?void 0:u.sort((e,t)=>t.timestamp-e.timestamp))||[],m=[{key:"id",label:"المعرف",sortable:!0,hidden:!0},{key:"from",label:"من",sortable:!0},{key:"target",label:"الى",sortable:!0},{key:"message",label:"التفاصيل",sortable:!0},{key:"date",label:"التاريخ",sortable:!0},{key:"time",label:"الوقت",sortable:!0},{key:"type",label:"النوع",sortable:!0}];return r.jsx(g,{children:r.jsx("div",{dir:"rtl",children:r.jsx(d,{title:"Logs",data:i,columns:m})})})}export{q as default};
