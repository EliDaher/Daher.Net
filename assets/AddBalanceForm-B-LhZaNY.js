import{r as o,j as e}from"./index-BgZ0y2RS.js";import{a as y}from"./index-xsH4HHeE.js";function k({payOrInv:s,isOpen:x,onClose:l,onSubmit:h,mahal:g=!1}){if(!x)return null;const[r,f]=o.useState(0),[u,n]=o.useState(""),[m,p]=o.useState(""),i=JSON.parse(localStorage.getItem("DaherUser")),[c,d]=o.useState(!1),N=async t=>{var b;t.preventDefault();try{d(!0);const a={amount:s=="pay"?Number(r):Number(-r),employee:g?"mahal":i.username,details:[{customerDetails:m,customerName:s=="pay"?u:i.username,customerNumber:"0",invoiceNumber:"0",invoiceValue:s=="pay"?Number(r):Number(-r)}]};(await y.post("https://server-uvnz.onrender.com/addInvoice",a)).data.success&&alert("تمت إضافة الفاتورة بنجاح!")}catch(a){console.error("حدث خطأ أثناء إرسال الفاتورة:",((b=a.response)==null?void 0:b.data)||a.message),alert("حدث خطأ أثناء إرسال الفاتورة")}d(!1),h(),l()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-30",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96 relative rtl",children:[e.jsx("button",{className:"absolute top-2 left-2 text-gray-500 hover:text-gray-800",onClick:l,children:"✕"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 text-right",children:s=="pay"?"اضافة الى الصندوق":"دفع من الصندوق"}),e.jsxs("form",{onSubmit:N,dir:"rtl",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"Amount",className:"mr-1 block text-sm font-medium text-gray-700",children:"اسم المشترك"}),e.jsx("input",{autoFocus:!0,placeholder:"عابر",onBlur:t=>{u||n("عابر")},value:u,onChange:t=>{n(t.target.value)},tabIndex:1,type:"text",id:"Amount",required:!0,className:"focus:outline-primary mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-right"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"Amount",className:"mr-1 block text-sm font-medium text-gray-700",children:"القيمة"}),e.jsx("input",{value:r,onChange:t=>{f(t.target.value)},tabIndex:1,type:"number",id:"Amount",required:!0,className:"focus:outline-primary mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-right"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"Details",className:"mr-1 block text-sm font-medium text-gray-700 text-right",children:"تفاصيل"}),e.jsx("textarea",{value:m,onChange:t=>{p(t.target.value)},tabIndex:2,id:"Details",required:!0,className:"focus:outline-primary mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-start",children:[e.jsx("button",{disabled:!!c,type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600",children:c?"جاري الحفظ ...":"Save"}),e.jsx("button",{className:"mr-auto bg-red-500 text-white px-4 py-2 rounded-md hover:text-white",onClick:l,children:"Close"})]})]})]})})}export{k as A};
