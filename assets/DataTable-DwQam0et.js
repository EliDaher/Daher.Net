import{p as K,r as l,j as e,f as c,g as $}from"./index-BrafDqf2.js";import{C as Q,a as U,b as X,e as k,c as Y}from"./card-DbOQ1Rpi.js";import{B as g}from"./button-Cp711Bd4.js";import{I as Z}from"./input-Dy87e98L.js";import{d as ee,e as ae}from"./DashboardLayout-DGtZ8l5T.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),L=l.forwardRef(({className:s,...r},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:c("w-full caption-bottom text-sm",s),...r})}));L.displayName="Table";const R=l.forwardRef(({className:s,...r},n)=>e.jsx("thead",{ref:n,className:c("[&_tr]:border-b",s),...r}));R.displayName="TableHeader";const B=l.forwardRef(({className:s,...r},n)=>e.jsx("tbody",{ref:n,className:c("[&_tr:last-child]:border-0",s),...r}));B.displayName="TableBody";const se=l.forwardRef(({className:s,...r},n)=>e.jsx("tfoot",{ref:n,className:c("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r}));se.displayName="TableFooter";const u=l.forwardRef(({className:s,...r},n)=>e.jsx("tr",{ref:n,className:c("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r}));u.displayName="TableRow";const y=l.forwardRef(({className:s,...r},n)=>e.jsx("th",{ref:n,className:c("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r}));y.displayName="TableHead";const m=l.forwardRef(({className:s,...r},n)=>e.jsx("td",{ref:n,className:c("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r}));m.displayName="TableCell";const re=l.forwardRef(({className:s,...r},n)=>e.jsx("caption",{ref:n,className:c("mt-4 text-sm text-muted-foreground",s),...r}));re.displayName="TableCaption";const ne=$("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le({className:s,variant:r,...n}){return e.jsx("div",{className:c(ne({variant:r}),s),...n})}function D({className:s,...r}){return e.jsx("div",{className:c("animate-pulse rounded-md bg-muted",s),...r})}function xe({title:s,totalPend:r,description:n,columns:p,data:M,searchable:E=!0,className:P,pageSizeOptions:V=[5,10,20],defaultPageSize:F=10,getRowClassName:v,renderRowActions:x,amountBold:H=!1,isLoading:I=!1}){const[o,_]=l.useState();l.useEffect(()=>{const a=JSON.parse(localStorage.getItem("DaherUser")||"null");_(a)},[]);const[w,O]=l.useState(""),[d,z]=l.useState(null),[h,j]=l.useState(1),[f,A]=l.useState(F),b=M.filter(a=>Object.values(a).some(t=>t==null?void 0:t.toString().toLowerCase().includes(w.toLowerCase()))),S=[...b].sort((a,t)=>{if(!d)return 0;const i=a[d.key],T=t[d.key];return i<T?d.direction==="asc"?-1:1:i>T?d.direction==="asc"?1:-1:0}),N=Math.ceil(S.length/f),C=S.slice((h-1)*f,h*f),q=a=>{let t="asc";(d==null?void 0:d.key)===a&&d.direction==="asc"&&(t="desc"),z({key:a,direction:t})},G=(a,t)=>t==="status"?e.jsx(le,{variant:a=="completed"||a=="تم التسديد"?"default":a=="جاري التسديد"?"secondary":"destructive",className:"capitalize text-center",children:a}):t==="email"?e.jsx("span",{className:"text-muted-foreground",children:a}):t==="createdAt"||t==="date"||t==="timestamp"||t==="lastUpdate"?e.jsx("span",{className:"text-muted-foreground",children:new Date(a).toLocaleString("en-GB")}):t==="amount"&&H?e.jsx("span",{className:"text-primary font-extrabold text-xl",children:a}):t==="total"?e.jsx("span",{className:"",children:a.toLocaleString("en-EG",{minimumFractionDigits:0})}):t==="balance"?e.jsx("span",{className:"",children:a.toFixed(0)}):t==="avgAmount"?e.jsx("span",{children:a.toFixed(0)}):t==="description"?e.jsx("span",{className:"line-clamp-3 w-64",children:a}):t==="imageUrl"?e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",title:a,className:`
            inline-flex items-center gap-2
            max-w-[150px]
            px-2 py-1
            text-sm font-medium
            text-blue-600 hover:text-blue-800
            hover:underline
            truncate
          `,children:[e.jsx("span",{className:"truncate",children:"View Image"}),e.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M14 3h7v7M10 14L21 3M21 14v7h-7"})})]}):a,W=l.useMemo(()=>b.reduce((a,t)=>a+Number(t.amount),0),[b]),J=Array.from({length:f});return e.jsxs(Q,{className:P,children:[e.jsx(U,{children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx(X,{children:s}),n&&e.jsx(k,{className:"mt-2",children:n}),r&&e.jsx(k,{className:"mt-2",children:W})]}),E&&e.jsx("div",{className:"flex w-full max-w-sm items-center space-x-2",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(te,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{placeholder:"Search...",value:w,onChange:a=>{O(a.target.value),j(1)},className:"pl-8"})]})})]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs(L,{className:"",children:[e.jsx(R,{children:e.jsxs(u,{children:[p.map(a=>e.jsx(y,{className:a.hidden||a.onlyAdmin&&(o==null?void 0:o.role)!=="admin"?"hidden":"text-center",children:a.sortable?e.jsxs(g,{variant:"ghost",onClick:()=>{q(a.key),console.log(a.hidden)},className:"h-auto p-0 font-medium",children:[a.label,(d==null?void 0:d.key)===a.key&&e.jsx("span",{className:"ml-1",children:d.direction==="asc"?"↑":"↓"})]}):a.label},a.key)),x&&e.jsx(y,{children:"Actions"})]})}),e.jsx(B,{className:"",children:I?J.map((a,t)=>e.jsxs(u,{children:[p.map(i=>e.jsx(m,{className:i.hidden||i.onlyAdmin&&(o==null?void 0:o.role)!=="admin"?"hidden":"",children:e.jsx(D,{className:"h-4 w-full rounded-md"})},i.key)),x&&e.jsx(m,{children:e.jsx(D,{className:"h-4 w-16 rounded-md"})})]},`skeleton-${t}`)):C.length>0?C.map((a,t)=>e.jsxs(u,{className:v?v(a):"",children:[p.map(i=>e.jsx(m,{className:i.hidden||i.onlyAdmin&&(o==null?void 0:o.role)!=="admin"?"hidden":"text-center",children:G(a[i.key],i.key)},i.key)),x&&e.jsx(m,{children:x(a)})]},t)):e.jsx(u,{children:e.jsx(m,{colSpan:p.length+(x?1:0),className:"text-center",children:"No data found."})})})]})}),e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["عدد الاسطر : ",b.length||0]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"عدد الاسطر في الصفحة :"}),e.jsx("select",{className:"border rounded px-2 py-1 text-sm",value:f,onChange:a=>{A(Number(a.target.value)),j(1)},children:V.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>j(a=>Math.max(a-1,1)),disabled:h===1,children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:["Page ",h," of ",N||1]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>j(a=>Math.min(a+1,N)),disabled:h===N||N===0,children:e.jsx(ae,{className:"h-4 w-4"})})]})]})]})]})}export{xe as D,D as S};
