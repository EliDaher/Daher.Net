import{r as n,m as f,j as s,q as c,J as o}from"./index-BgjzOHka.js";import{C as u,a as g,b as v,e as C,c as w,d as y}from"./card-BeiAbVYm.js";import{D as N}from"./DashboardLayout-P3XUXwj6.js";import{B as d}from"./button-BrQsrS7q.js";import"./house-CzX8uGDh.js";function k(){const[l,i]=n.useState([]),m=async()=>{try{const e=await c.get("https://paynet-1.onrender.com/api/invoice/viewBills");console.log(e.data),i(e.data)}catch(e){console.error(e)}},x=async e=>{var t,a;try{if(!window.confirm("هل انت متاكد من حذف الفاتورة؟"))return;await c.delete(`https://paynet-1.onrender.com/api/invoice/delete-bill/${e}`),o.success("تم حذف الفاتورة بنجاح"),i(h=>h.filter(j=>j._id!==e))}catch(r){console.error(r),o.error(((a=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:a.message)||"حدث خطأ أثناء الحذف")}};n.useEffect(()=>{m()},[]);const p=f();return s.jsx(N,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map((e,t)=>s.jsxs(u,{children:[s.jsxs(g,{children:[s.jsxs(v,{children:["فاتورة : ",e.customerName]}),s.jsx(C,{children:t+1})]}),s.jsxs(w,{children:[s.jsxs("p",{className:"font-bold mb-2",children:["المجموع: ",e.total," $"]}),s.jsx("div",{className:"space-y-2",children:e.items.map(a=>s.jsxs("div",{className:"flex justify-between text-sm border-b pb-1",children:[s.jsx("span",{children:a.name}),s.jsxs("span",{children:[a.price,"$ × ",a.stock]})]},a._id))})]}),s.jsxs(y,{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString()}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{size:"sm",onClick:()=>p(`/viewBills/${e._id}`),children:"عرض"}),s.jsx(d,{size:"sm",variant:"destructive",onClick:()=>x(e._id),children:"حذف"})]})]})]},e._id))})})}export{k as default};
