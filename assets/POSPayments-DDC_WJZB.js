import{r as s,l as x,j as e}from"./index-DfKzFYeD.js";import{D as j}from"./DataTable-D0V7OO-j.js";import{D as o}from"./DashboardLayout-8_3ER2p3.js";import{B as i}from"./button-DImyTUjy.js";import{P as h}from"./PopupForm-D1sdkAIq.js";import{b as g,d as k}from"./invoices-BUZBDLLc.js";import{u as v}from"./useQuery-CvaQs_os.js";import{u as N}from"./useMutation-CdDNi5dr.js";import"./card-BUhZdD5c.js";import"./input-Cc2gdusx.js";import"./house-D8Tiyqht.js";import"./axios-KE4dpIQc.js";import"./index-xsH4HHeE.js";function E(){const[n,r]=s.useState(!1),[m]=s.useState("تأكيد الدفعة"),[t,u]=s.useState(null),c=x(),d=N({mutationFn:({id:a,email:y,amount:f})=>g(a,y,f),onSuccess:()=>{c.invalidateQueries({queryKey:["done-table"]})}}),{data:l,isLoading:p}=v({queryKey:["payment-table"],queryFn:k}),b=[{key:"_id",label:"المعرف",sortable:!0,hidden:!0},{key:"destination",label:"الوجهة",sortable:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"operator",label:"العملية",sortable:!0},{key:"amount",label:"المبلغ",sortable:!0},{key:"noticeNumber",label:"ملاحظة",sortable:!0},{key:"date",label:"التاريخ",sortable:!0},{key:"isConfirmed",label:"الحالة",sortable:!0},{key:"createdAt",label:"تاريخ العملية",sortable:!0}];return p?e.jsx(o,{children:e.jsx("div",{dir:"rtl",className:"space-y-6 text-center text-lg font-semibold",children:"جارِ تحميل البيانات..."})}):e.jsxs(o,{children:[e.jsx(h,{isOpen:n,setIsOpen:r,title:m,trigger:e.jsx(e.Fragment,{}),children:e.jsx("div",{className:"flex flex-row-reverse gap-2",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),t&&d.mutate({id:t._id,email:t.name,amount:t.amount}),r(!1)},className:"space-y-4 w-full",children:[t&&e.jsxs("p",{className:"text-right",children:["هل تريد تأكيد الدفعة بقيمة ",t.amount," للمستخدم ",e.jsx("strong",{className:"text-lg",children:t.name})]}),e.jsx(i,{type:"submit",children:"تأكيد قبول الدفعة"})]})})}),e.jsx("div",{dir:"rtl",className:"space-y-6",children:e.jsx(j,{title:"دفعات نقاط البيع",description:"",columns:b,data:l||[],renderRowActions:a=>e.jsx(i,{variant:a.isConfirmed?"default":"destructive",className:"capitalize",onClick:()=>{u(a),r(!0)},children:a.isConfirmed?"تم التأكيد":"بحاجة الى تأكيد"})})})]})}export{E as default};
