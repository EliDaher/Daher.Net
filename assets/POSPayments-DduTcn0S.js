import{r as s,g,j as e}from"./index-C1ctwKm1.js";import{D as h}from"./DataTable-ZBoPgCfS.js";import{D as n}from"./DashboardLayout-CGz-3KeX.js";import{B as m}from"./button-HZGTl1VX.js";import{P as k}from"./PopupForm-CRLOogZP.js";import{b as v,d as N}from"./invoices-BUZBDLLc.js";import{u as S}from"./useQuery-CfLgXW7N.js";import{u as C}from"./useMutation-Cl9VbvdM.js";import"./card-aOLl0Vkw.js";import"./input-d75Tn4MJ.js";import"./house-Cgxta3gk.js";import"./axios-KE4dpIQc.js";import"./index-xsH4HHeE.js";function M(){const[u,r]=s.useState(!1),[c]=s.useState("تأكيد الدفعة"),[t,d]=s.useState(null),[l,o]=s.useState(!1),p=g(),b=C({mutationFn:({id:a,email:x,amount:j})=>v(a,x,j),onSuccess:()=>{p.invalidateQueries({queryKey:["done-table"]})}}),{data:i,isLoading:f}=S({queryKey:["payment-table"],queryFn:N}),y=[{key:"_id",label:"المعرف",sortable:!0,hidden:!0},{key:"destination",label:"الوجهة",sortable:!0},{key:"name",label:"الاسم",sortable:!0},{key:"number",label:"الرقم",sortable:!0},{key:"operator",label:"العملية",sortable:!0},{key:"amount",label:"المبلغ",sortable:!0},{key:"noticeNumber",label:"ملاحظة",sortable:!0},{key:"date",label:"التاريخ",sortable:!0},{key:"isConfirmed",label:"الحالة",sortable:!0},{key:"createdAt",label:"تاريخ العملية",sortable:!0}];return f?e.jsx(n,{children:e.jsx("div",{dir:"rtl",className:"space-y-6 text-center text-lg font-semibold",children:"جارِ تحميل البيانات..."})}):e.jsxs(n,{children:[e.jsx(k,{isOpen:u,setIsOpen:r,title:c,trigger:e.jsx(e.Fragment,{}),children:e.jsx("div",{className:"flex flex-row-reverse gap-2",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),o(!0),t&&b.mutate({id:t._id,email:t.name,amount:t.amount}),r(!1),o(!1)},className:"space-y-4 w-full",children:[t&&e.jsxs("p",{className:"text-right",children:["هل تريد تأكيد الدفعة بقيمة ",t.amount," للمستخدم ",e.jsx("strong",{className:"text-lg",children:t.name})]}),e.jsx(m,{disabled:!!l,type:"submit",children:l?"تأكيد قبول الدفعة":"جاري التأكيد"})]})})}),e.jsx("div",{dir:"rtl",className:"space-y-6",children:e.jsx(h,{title:"دفعات نقاط البيع",description:"",columns:y,data:i||[],renderRowActions:a=>e.jsx(m,{variant:a.isConfirmed?"default":"destructive",className:"capitalize",onClick:()=>{d(a),r(!0)},children:a.isConfirmed?"تم التأكيد":"بحاجة الى تأكيد"})})})]})}export{M as default};
