import{r as n,i as j,j as e,D as f,C as g,m as u,n as v,aj as C,o as w,ak as y,B as c,J as o}from"./index-CV6KU4Cz.js";function B(){const[d,i]=n.useState([]),l=async()=>{try{const s=await o.get("https://paynet-1.onrender.com/api/invoice/viewBills");console.log(s.data),i(s.data)}catch(s){console.error(s)}},x=async s=>{var r,a;try{if(!window.confirm("هل انت متاكد من حذف الفاتورة؟"))return;await o.delete(`https://paynet-1.onrender.com/api/invoice/delete-bill/${s}`),alert("تم حذف الفاتورة بنجاح"),i(p=>p.filter(h=>h._id!==s))}catch(t){console.error(t),alert(((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"حدث خطأ أثناء الحذف")}};n.useEffect(()=>{l()},[]);const m=j();return e.jsx(f,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((s,r)=>e.jsxs(g,{children:[e.jsxs(u,{children:[e.jsxs(v,{children:["فاتورة : ",s.customerName]}),e.jsx(C,{children:r+1})]}),e.jsxs(w,{children:[e.jsxs("p",{className:"font-bold mb-2",children:["المجموع: ",s.total," $"]}),e.jsx("div",{className:"space-y-2",children:s.items.map(a=>e.jsxs("div",{className:"flex justify-between text-sm border-b pb-1",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{children:[a.price,"$ × ",a.stock]})]},a._id))})]}),e.jsxs(y,{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{size:"sm",onClick:()=>m(`/viewBills/${s._id}`),children:"عرض"}),e.jsx(c,{size:"sm",variant:"destructive",onClick:()=>x(s._id),children:"حذف"})]})]})]},s._id))})})}export{B as default};
