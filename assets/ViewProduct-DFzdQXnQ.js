import{c as N,r as h,j as e,ai as P,B as j,J as v,D as U,p as D}from"./index-VlY56Sk6.js";import{L as w}from"./loader-circle-BaM7kPhs.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=N("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=N("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function $({product:l,onClose:p,onUpdated:x}){const[r,y]=h.useState({name:l.name||"",price:l.price||"",category:l.category||"",stock:l.stock||"",description:l.description||"",imageUrl:l.imageUrl||""}),[g,u]=h.useState(!1),f="https://paynet-1.onrender.com",m=s=>{y({...r,[s.target.name]:s.target.value})},a=async s=>{var n,c;s.preventDefault();try{u(!0);const b=await v.put(`${f}/api/product/update-product/${l._id}`,r);x(b.data)}catch(b){alert(((c=(n=b==null?void 0:b.response)==null?void 0:n.data)==null?void 0:c.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£")}finally{u(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl p-6 relative",children:[e.jsx("button",{onClick:p,className:"absolute right-4 top-4 text-gray-500 hover:text-black",children:e.jsx(P,{})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Product"}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsx("input",{name:"name",value:r.name,onChange:m,placeholder:"Name",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"price",value:r.price,onChange:m,placeholder:"Price",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"category",value:r.category,onChange:m,placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"stock",value:r.stock,onChange:m,placeholder:"Stock",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"imageUrl",value:r.imageUrl,onChange:m,placeholder:"Image URL",className:"w-full border p-2 rounded"}),e.jsx("textarea",{name:"description",value:r.description,onChange:m,placeholder:"Description",className:"w-full border p-2 rounded"}),e.jsx(j,{disabled:g,className:"w-full",children:g?e.jsx(w,{className:"h-4 w-4 animate-spin"}):"Update Product"})]})]})})}function q({items:l,setItems:p}){const[x,r]=h.useState(!1),y=(a,s)=>{p(n=>n.map(c=>c._id===a?{...c,quantity:Math.max(1,s)}:c))},g=(a,s)=>{p(n=>n.map(c=>c._id===a?{...c,price:Math.max(0,s)}:c))},u=a=>{p(s=>s.filter(n=>n._id!==a))},f=l.reduce((a,s)=>a+s.price*s.quantity,0),m=async()=>{var a,s;r(!0);try{const n=await v.post("https://paynet-1.onrender.com/api/invoice/create-invoice",{items:l,total:f});alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!")}catch(n){console.log(n),alert(((s=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:s.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©")}finally{r(!1)}};return e.jsxs("div",{className:"border rounded-xl p-4 bg-white shadow-md space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸ§¾ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),l.length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),l.map(a=>e.jsxs("div",{className:"grid grid-cols-5 gap-3 items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:a.name}),e.jsx("input",{type:"number",value:a.price,onChange:s=>g(a._id,Number(s.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",min:1,value:a.quantity,onChange:s=>y(a._id,Number(s.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx(j,{size:"sm",variant:"destructive",onClick:()=>u(a._id),children:e.jsx(k,{className:"h-4 w-4"})})]},a._id)),e.jsxs("div",{className:"flex justify-between border-t pt-3 font-bold",children:[e.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:"}),e.jsxs("span",{className:"text-green-600",children:[f.toFixed(2)," $"]})]}),e.jsx("button",{onClick:m,disabled:x,className:`
    w-full font-bold px-4 py-2 rounded mt-4 text-white
    ${x?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}
  `,children:x?"Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...":"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}function E(){const[l,p]=h.useState([]),[x,r]=h.useState(null),[y,g]=h.useState(null),[u,f]=h.useState(!1),[m,a]=h.useState([]),s=[{key:"name",label:"Name",sortable:!0},{key:"price",label:"Price",sortable:!0},{key:"category",label:"Category"},{key:"stock",label:"Stock"},{key:"description",label:"Description"},{key:"imageUrl",label:"ImageUrl"}],n="https://paynet-1.onrender.com",c=async()=>{var t,d;try{const o=await v.get(`${n}/api/product/get-product`);console.log(o.data),p(o.data)}catch(o){console.log(o),alert(((d=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:d.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}};h.useEffect(()=>{c()},[]);const b=async t=>{var d,o;try{if(!window.confirm("Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ§ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬"))return;r(t),await v.delete(`${n}/api/product/delete-product/${t}`),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),p(S=>S.filter(I=>I._id!==t))}catch(i){console.log(i),alert(((o=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:o.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}finally{r(null)}},C=()=>{alert(u?"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©":"ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ù† Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"),f(!u)},_=t=>{a(d=>d.find(i=>i._id===t._id)?d.map(i=>i._id===t._id?{...i,quantity:i.quantity+1}:i):[...d,{_id:t._id,name:t.name,price:t.price,quantity:1}])};return e.jsxs(U,{children:[y&&e.jsx($,{product:y,onClose:()=>g(null),onUpdated:t=>{p(d=>d.map(o=>o._id===t._id?t:o)),g(null)}}),e.jsx("div",{className:"mb-8 p-6  rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø³Ù‡ÙˆÙ„Ø©"})]}),e.jsx(j,{onClick:()=>C(),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold px-8 py-2 rounded-lg shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105 active:scale-95",children:u?"Ø¥Ù„ØºØ§Ø¡":"Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}),e.jsx(D,{title:"Products",description:"All available products",columns:s,data:l,renderRowActions:t=>e.jsx("div",{className:"flex gap-2",children:u?e.jsx(j,{onClick:()=>_(t),size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}):e.jsxs(e.Fragment,{children:[e.jsx(j,{onClick:()=>g(t),size:"sm",variant:"outline",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(j,{onClick:()=>b(t._id),size:"sm",variant:"destructive",disabled:x===t._id,children:x?e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(k,{className:"h-4 w-4"})})]})})}),u&&e.jsx(q,{items:m,setItems:a})]})}export{E as default};
