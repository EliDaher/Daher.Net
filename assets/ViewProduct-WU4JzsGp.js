import{c as N,r as p,j as e,ar as P,B as b,z as v,D as U,p as D}from"./index-D8E66CPb.js";import{L as w}from"./loader-circle-BGw4rdNP.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=N("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=N("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function q({product:r,onClose:m,onUpdated:x}){const[c,g]=p.useState({name:r.name||"",price:r.price||"",category:r.category||"",stock:r.stock||"",description:r.description||"",imageUrl:r.imageUrl||""}),[u,a]=p.useState(!1),t="https://paynet-1.onrender.com",n=y=>{g({...c,[y.target.name]:y.target.value})},o=async y=>{var f,j;y.preventDefault();try{a(!0);const h=await v.put(`${t}/api/product/update-product/${r._id}`,c);x(h.data)}catch(h){alert(((j=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:j.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£")}finally{a(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl p-6 relative",children:[e.jsx("button",{onClick:m,className:"absolute right-4 top-4 text-gray-500 hover:text-black",children:e.jsx(P,{})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Product"}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsx("input",{name:"name",value:c.name,onChange:n,placeholder:"Name",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"price",value:c.price,onChange:n,placeholder:"Price",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"category",value:c.category,onChange:n,placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"stock",value:c.stock,onChange:n,placeholder:"Stock",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"imageUrl",value:c.imageUrl,onChange:n,placeholder:"Image URL",className:"w-full border p-2 rounded"}),e.jsx("textarea",{name:"description",value:c.description,onChange:n,placeholder:"Description",className:"w-full border p-2 rounded"}),e.jsx(b,{disabled:u,className:"w-full",children:u?e.jsx(w,{className:"h-4 w-4 animate-spin"}):"Update Product"})]})]})})}function L({items:r,setItems:m}){const x=(a,t)=>{m(n=>n.map(o=>o._id===a?{...o,quantity:Math.max(1,t)}:o))},c=(a,t)=>{m(n=>n.map(o=>o._id===a?{...o,price:Math.max(0,t)}:o))},g=a=>{m(t=>t.filter(n=>n._id!==a))},u=r.reduce((a,t)=>a+t.price*t.quantity,0);return e.jsxs("div",{className:"border rounded-xl p-4 bg-white shadow-md space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸ§¾ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),r.length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),r.map(a=>e.jsxs("div",{className:"grid grid-cols-5 gap-3 items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:a.name}),e.jsx("input",{type:"number",value:a.price,onChange:t=>c(a._id,Number(t.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",min:1,value:a.quantity,onChange:t=>x(a._id,Number(t.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx(b,{size:"sm",variant:"destructive",onClick:()=>g(a._id),children:e.jsx(k,{className:"h-4 w-4"})})]},a._id)),e.jsxs("div",{className:"flex justify-between border-t pt-3 font-bold",children:[e.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:"}),e.jsxs("span",{className:"text-green-600",children:[u.toFixed(2)," $"]})]})]})}function E(){const[r,m]=p.useState([]),[x,c]=p.useState(null),[g,u]=p.useState(null),[a,t]=p.useState(!1),[n,o]=p.useState([]),y=[{key:"name",label:"Name",sortable:!0},{key:"price",label:"Price",sortable:!0},{key:"category",label:"Category"},{key:"stock",label:"Stock"},{key:"description",label:"Description"},{key:"imageUrl",label:"ImageUrl"}],f="https://paynet-1.onrender.com",j=async()=>{var s,d;try{const l=await v.get(`${f}/api/product/get-product`);console.log(l.data),m(l.data)}catch(l){console.log(l),alert(((d=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:d.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}};p.useEffect(()=>{j()},[]);const h=async s=>{var d,l;try{if(!window.confirm("Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ§ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬"))return;c(s),await v.delete(`${f}/api/product/delete-product/${s}`),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),m(I=>I.filter(S=>S._id!==s))}catch(i){console.log(i),alert(((l=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:l.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}finally{c(null)}},C=()=>{alert(a?"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©":"ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ù† Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"),t(!a)},_=s=>{o(d=>d.find(i=>i._id===s._id)?d.map(i=>i._id===s._id?{...i,quantity:i.quantity+1}:i):[...d,{_id:s._id,name:s.name,price:s.price,quantity:1}])};return e.jsxs(U,{children:[g&&e.jsx(q,{product:g,onClose:()=>u(null),onUpdated:s=>{m(d=>d.map(l=>l._id===s._id?s:l)),u(null)}}),e.jsx("div",{className:"mb-8 p-6  rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø³Ù‡ÙˆÙ„Ø©"})]}),e.jsx(b,{onClick:()=>C(),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold px-8 py-2 rounded-lg shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105 active:scale-95",children:a?"Ø¥Ù„ØºØ§Ø¡":"Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}),e.jsx(D,{title:"Products",description:"All available products",columns:y,data:r,renderRowActions:s=>e.jsx("div",{className:"flex gap-2",children:a?e.jsx(b,{onClick:()=>_(s),size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{onClick:()=>u(s),size:"sm",variant:"outline",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(b,{onClick:()=>h(s._id),size:"sm",variant:"destructive",disabled:x===s._id,children:x?e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(k,{className:"h-4 w-4"})})]})})}),a&&e.jsx(L,{items:n,setItems:o})]})}export{E as default};
