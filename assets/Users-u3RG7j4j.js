import{c as T,r,j as e,B as u,s as Q,p as re,i as le,t as te,k as ne,l as de,v as ce,D as ie,T as oe,C as J,m as xe,U as he,n as pe,w as me,o as K}from"./index-Bipx9DSv.js";import{a as ue,d as je,g as ge}from"./wifi-CbmGeset.js";import{S as be}from"./skeleton-LZg4zv0h.js";import{S as U,a as M,b as E,c as I,d as p}from"./select-D0ywLGoO.js";import{F as m}from"./FormInput-CHXsVDr7.js";import{l as Ne}from"./index-BLRFddlS.js";import{P as fe}from"./plus-8tY-T3cs.js";import"./index-CWzWN4YS.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=T("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=T("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=T("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function we(){const y={name:"",contactNumber:"",MonthlyFee:"",speed:"",userIp:"",userName:"",password:"",location:"",sender:"",dealer:""},[l,i]=r.useState(y),[t,A]=r.useState({}),[v,P]=r.useState(!1),[j,w]=r.useState(""),[b,g]=r.useState(""),n=x=>{const{id:h,value:N}=x.target;i(S=>({...S,[h]:N})),A(S=>({...S,[h]:""}))},L=()=>{const x={};return Object.entries(l).forEach(([h,N])=>{if(!N.trim()){if(h=="dealer")return;x[h]="Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨"}}),A(x),Object.keys(x).length===0},B=async x=>{if(x.preventDefault(),w(""),g(""),!!L()){P(!0);try{console.log(l),(await ue(l)).success?(w("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­"),i(y),window.location.reload()):g("âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ")}catch{g("âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±")}finally{P(!1)}}};return e.jsxs("div",{className:"w-full max-w-3xl mx-auto p-6 max-h-[85vh] overflow-y-auto bg-white rounded-2xl shadow-md",children:[j&&e.jsx("p",{className:"bg-green-100 text-green-700 px-4 py-2 rounded-lg text-right mb-4",children:j}),b&&e.jsxs("p",{className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg text-right mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5"}),b]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"name",label:"Ø§Ù„Ø§Ø³Ù…",value:l.name,onChange:n,error:t.name}),e.jsx(m,{id:"contactNumber",label:"Ø±Ù‚Ù… Ø§Ù„Ø§ØªØµØ§Ù„",type:"number",value:l.contactNumber,onChange:n,error:t.contactNumber})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"MonthlyFee",label:"Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©",type:"number",value:l.MonthlyFee,onChange:n,error:t.MonthlyFee}),e.jsx(m,{id:"speed",label:"Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",type:"number",value:l.speed,onChange:n,error:t.speed})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"userIp",label:"User IP",value:l.userIp,onChange:n,error:t.userIp}),e.jsx(m,{id:"userName",label:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",value:l.userName,onChange:n,error:t.userName})]}),e.jsx(m,{id:"password",label:"ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±",type:"password",value:l.password,onChange:n,error:t.password}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(m,{id:"location",label:"Ø§Ù„Ù…ÙˆÙ‚Ø¹",value:l.location,onChange:n,error:t.location}),e.jsx(m,{id:"sender",label:"Ø§Ù„Ù…Ø±Ø³Ù„",value:l.sender,onChange:n,error:t.sender})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.jsx(m,{id:"dealer",label:"Ø§Ù„Ø¨Ø§Ø¦Ø¹",value:l.dealer,onChange:n,error:t.dealer})}),e.jsx("div",{className:"pt-4",children:e.jsx(u,{type:"submit",disabled:v,className:"w-full bg-green-600 hover:bg-green-700 text-white text-lg py-3 rounded-xl transition-all shadow-md flex justify-center items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):"Ø¥Ø±Ø³Ø§Ù„"})})]})]})}const O=Ne("https://daherserver-zgmy.onrender.com");O.emit("register","reactUser");function Se({userList:y}){const[l,i]=r.useState(!1),t=[{key:"name",label:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",sortable:!0},{key:"uptime",label:"ÙˆÙ‚Øª Ø§Ù„Ø§ØªØµØ§Ù„",sortable:!0},{key:"address",label:"IP",sortable:!0}];return e.jsx(Q,{isOpen:l,setIsOpen:i,trigger:e.jsx(u,{variant:"destructive",className:"",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ†"}),children:e.jsx("div",{children:e.jsx(re,{title:"ÙŠÙˆØ²Ø±Ø§Øª ÙØ¹Ø§Ù„Ø© Ùˆ ØºÙŠØ± Ù…Ø¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬",data:y,columns:t,pageSizeOptions:[5,10],defaultPageSize:5})})})}function Ee(){const y=le(),l=te(),i=JSON.parse(localStorage.getItem("DaherUser")),[t,A]=r.useState(""),[v,P]=r.useState("cards"),[j,w]=r.useState(1),b=12,[g,n]=r.useState(""),[L,B]=r.useState("all"),[x,h]=r.useState("all"),[N,S]=r.useState("all"),[F,D]=r.useState("all"),[Z,_]=r.useState(!1),[H,V]=r.useState(!1),[C,$]=r.useState(null),W=ne(),[d,X]=r.useState([]);r.useEffect(()=>{O.emit("getActive");const s=a=>{const k=JSON.parse(a.ActivePPP.data);X(k)};return O.on("returnActivePPP",s),()=>{O.off("returnActivePPP",s)}},[]);const{data:c,isLoading:G}=de({queryKey:["customers-table"],queryFn:ge}),q=ce({mutationFn:s=>je(s),onSuccess:s=>{W.invalidateQueries({queryKey:["customers-table"]}),V(!1),$(null)},onError:()=>{alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}});r.useEffect(()=>{l.state=="unpaid"&&D("noBalance")},[]),r.useEffect(()=>{w(1)},[g]);const o=c==null?void 0:c.filter(s=>{const a=s.Name.toLowerCase().includes(g.toLowerCase())||s.UserName.toLowerCase().includes(g.toLowerCase())||s.Contact.includes(g),k=L!=="all"?s.sender===L:!0,ee=x!=="all"?s.SubscriptionSpeed===x:!0,se=N!=="all"?s.dealer===N:!0,ae=F==="noBalance"?s.Balance<0:F==="hasBalance"?s.Balance>0:F==="BalanceZero"?s.Balance==0:!0;return a&&k&&ee&&ae&&se}),z=Math.ceil((o==null?void 0:o.length)/b),f=o==null?void 0:o.slice((j-1)*b,j*b),Y=()=>{n(""),B("all"),h("all"),D("all")};return r.useEffect(()=>{i.role=="dealer"&&S(i.username)},[]),e.jsx(ie,{children:e.jsxs("div",{children:[e.jsx(Q,{isOpen:Z,setIsOpen:_,title:"Ø¥Ø¶Ø§ÙØ© Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯",trigger:e.jsx(e.Fragment,{children:e.jsx(u,{variant:"accent",className:"fixed bottom-4 right-5 shadow-lg rounded-full p-3",children:e.jsx(fe,{className:"w-5 h-5"})})}),children:e.jsx(we,{})}),e.jsx(Q,{title:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù",trigger:e.jsx(e.Fragment,{}),isOpen:H,setIsOpen:V,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row-reverse gap-2 mb-4",children:[e.jsx("p",{className:"text-right",children:"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´ØªØ±ÙƒØŸ"}),e.jsx("p",{className:"text-right font-bold",children:C==null?void 0:C.Name})]}),e.jsx(u,{onClick:s=>{s.preventDefault(),q.mutate(C==null?void 0:C.id)},disabled:q.isPending,children:q.isPending?"...":"ØªØ£ÙƒÙŠØ¯"})]})}),e.jsxs("div",{dir:"rtl",className:"space-y-6",children:[e.jsxs("div",{className:"-mt-10 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:v==="cards"?"default":"outline",onClick:()=>P("cards"),children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Ø¹Ø±Ø¶ ÙƒØ¨Ø·Ø§Ù‚Ø§Øª"]}),e.jsxs(u,{variant:v==="table"?"default":"outline",onClick:()=>P("table"),children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Ø¹Ø±Ø¶ ÙƒØ¬Ø¯ÙˆÙ„"]}),(i==null?void 0:i.role).includes("admin")&&e.jsx(Se,{userList:d==null?void 0:d.filter(s=>{const a=s.name.split("@")[0].trim().toLowerCase();return!c.some(k=>k.UserName.trim().toLowerCase()===a)})})]})]}),e.jsxs(J,{children:[e.jsxs(xe,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(he,{className:"h-6 w-6 text-muted-foreground"}),(d==null?void 0:d.length)==0||d==null?e.jsx(R,{className:"w-5 h-5 animate-spin"}):null,e.jsxs(pe,{children:["Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† (",o==null?void 0:o.length,")"]})]}),e.jsxs("span",{children:["Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø±Ø¹Ø§Øª :"," ",o==null?void 0:o.reduce((s,a)=>s+ +a.SubscriptionSpeed,0)]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 px-4 pb-4",children:[e.jsx(me,{placeholder:"ðŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",className:"w-full md:max-w-sm",value:g,onChange:s=>n(s.target.value)}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs(U,{value:L,onValueChange:B,children:[e.jsx(M,{className:"w-36",children:e.jsx(E,{placeholder:"Ø§Ù„Ù…Ø±Ø³Ù„"})}),e.jsxs(I,{children:[e.jsx(p,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),[...new Set(c==null?void 0:c.map(s=>{var a;return(a=s.sender)==null?void 0:a.trim()}))].filter(s=>s&&s!=="").map(s=>e.jsx(p,{value:s,children:s},s))]})]}),e.jsxs(U,{value:x,onValueChange:h,children:[e.jsx(M,{className:"w-36",children:e.jsx(E,{placeholder:"Ø§Ù„Ø³Ø±Ø¹Ø©"})}),e.jsxs(I,{children:[e.jsx(p,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),[...new Set(c==null?void 0:c.map(s=>{var a;return(a=s.SubscriptionSpeed)==null?void 0:a.trim()}))].filter(s=>s&&s!=="").map(s=>e.jsxs(p,{value:s,children:[s," Mbps"]},s))]})]}),e.jsxs(U,{disabled:i.role=="dealer",value:N,onValueChange:S,children:[e.jsx(M,{className:"w-36",children:e.jsx(E,{placeholder:"Ø§Ù„Ø¨Ø§Ø¦Ø¹"})}),e.jsxs(I,{children:[e.jsx(p,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),[...new Set(c==null?void 0:c.map(s=>s.dealer))].filter(Boolean).map(s=>e.jsx(p,{value:s,children:s},s))]})]}),e.jsxs(U,{value:F,onValueChange:D,children:[e.jsx(M,{className:"w-36",children:e.jsx(E,{placeholder:"Ø§Ù„Ø±ØµÙŠØ¯"})}),e.jsxs(I,{children:[e.jsx(p,{value:"all",children:"Ø§Ù„ÙƒÙ„"}),e.jsx(p,{value:"BalanceZero",children:"0 Ø±ØµÙŠØ¯"}),e.jsx(p,{value:"noBalance",children:"Ø¨Ø¯ÙˆÙ† Ø±ØµÙŠØ¯"}),e.jsx(p,{value:"hasBalance",children:"Ù…Ø¹ Ø±ØµÙŠØ¯"})]})]})]}),e.jsx(u,{variant:"ghost",onClick:Y,children:"Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·"})]}),e.jsx(K,{children:G?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(b)].map((s,a)=>e.jsx(be,{className:"h-24 w-full rounded-lg"},a))}):t?e.jsx("p",{className:"text-red-600 text-center",children:t}):(f==null?void 0:f.length)===0?e.jsx("p",{className:"text-muted-foreground text-center",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø´ØªØ±ÙƒÙŠÙ†."}):v==="cards"?e.jsx("div",{dir:"rtl",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f==null?void 0:f.map(s=>e.jsxs(J,{className:"shadow-sm",children:[e.jsxs(K,{className:`p-4 space-y-1 ${d!=null&&d.some(a=>a.name.includes(s.UserName))?"bg-accent-950 dark:bg-accent-50":""}`,onClick:()=>{y(`/CustomerDetails/${s.id}`,{state:(d==null?void 0:d.find(a=>a.name.split("@")[0].trim().toLowerCase()===s.UserName.trim().toLowerCase()))||null})},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ø§Ø³Ù…:"})," ",s.Name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:"})," ",s.UserName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ø±ØµÙŠØ¯:"})," ",s.Balance," USD"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ù‡Ø§ØªÙ:"})," ",s.Contact]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ø§Ù„Ù…Ø±Ø³Ù„:"})," ",s.sender]})]}),i.username=="elidaher"&&e.jsx(u,{onClick:a=>{a.preventDefault(),$(s),V(!0)},variant:"destructive",className:"w-full rounded-t-none rounded-b-lg",children:"Ø­Ø°Ù"})]},s.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"#"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"border px-2 py-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ø³Ø±Ø¹Ø©"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ù…Ø±Ø³Ù„"}),e.jsx("th",{className:"border px-2 py-1",children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]})}),e.jsx("tbody",{children:f.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1",children:(j-1)*b+a+1}),e.jsx("td",{className:"border px-2 py-1",children:s.Name}),e.jsx("td",{className:"border px-2 py-1",children:s.UserName}),e.jsx("td",{className:"border px-2 py-1",children:s.Password}),e.jsxs("td",{className:"border px-2 py-1",children:[s.Balance," USD"]}),e.jsxs("td",{className:"border px-2 py-1",children:[s.MonthlyFee," USD"]}),e.jsxs("td",{className:"border px-2 py-1",children:[s.SubscriptionSpeed," Mbps"]}),e.jsx("td",{className:"border px-2 py-1",children:s.Contact}),e.jsx("td",{className:"border px-2 py-1",children:s.sender}),e.jsx("td",{className:"border px-2 py-1",children:s.location})]},s.id))})]})})})]}),!G&&!t&&z>1&&e.jsxs("div",{dir:"rtl",className:"flex justify-center items-center gap-2",children:[e.jsx(u,{disabled:j===1,onClick:()=>w(s=>s-1),variant:"outline",children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{className:"text-muted-foreground",children:["ØµÙØ­Ø© ",j," Ù…Ù† ",z]}),e.jsx(u,{disabled:j===z,onClick:()=>w(s=>s+1),variant:"outline",children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})," "]})})}export{Ee as default};
