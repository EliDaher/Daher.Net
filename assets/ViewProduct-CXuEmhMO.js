import{p as U,r as x,j as e,X as D,w as P}from"./index-BDdD0U4n.js";import{D as $}from"./DashboardLayout-Jf3qepeK.js";import{D as L}from"./DataTable-e2tcXuVr.js";import{B as w,L as M}from"./button-CkfK7Vl1.js";import{u as q}from"./index.esm-4C7hqibv.js";import{z as N,t as z}from"./index-paqXoz5o.js";import{F as C}from"./FormInput-BnVUfTB4.js";import{P as B}from"./PopupForm-PnHBliLu.js";import"./house-ki08jCTb.js";import"./card-VQfqbli1.js";import"./input-cM0YjS2-.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=U("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=U("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function E({product:r,onClose:h,onUpdated:g}){const[o,b]=x.useState({name:r.name||"",price:r.price||"",priceCost:r.priceCost||"",priceWolesale:r.priceWolesale||"",category:r.category||"",stock:r.stock||"",description:r.description||"",imageUrl:r.imageUrl||""}),[y,l]=x.useState(!1),k="https://paynet-1.onrender.com",u=f=>{b({...o,[f.target.name]:f.target.value})},d=async f=>{var j,v;f.preventDefault();try{l(!0);const p=await P.put(`${k}/api/product/update-product/${r._id}`,o);g(p.data)}catch(p){alert(((v=(j=p==null?void 0:p.response)==null?void 0:j.data)==null?void 0:v.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£")}finally{l(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl p-6 relative",children:[e.jsx("button",{onClick:h,className:"absolute right-4 top-4 text-gray-500 hover:text-black",children:e.jsx(D,{})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Product"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsx("input",{name:"name",value:o.name,onChange:u,placeholder:"Name",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"price",value:o.price,onChange:u,placeholder:"Price",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"priceCost",value:o.priceCost,onChange:u,placeholder:"Price Cost",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"priceWolesale",value:o.priceWolesale,onChange:u,placeholder:"Price Wholesale",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"category",value:o.category,onChange:u,placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"stock",value:o.stock,onChange:u,placeholder:"Stock",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"imageUrl",value:o.imageUrl,onChange:u,placeholder:"Image URL",className:"w-full border p-2 rounded"}),e.jsx("textarea",{name:"description",value:o.description,onChange:u,placeholder:"Description",className:"w-full border p-2 rounded"}),e.jsx(w,{disabled:y,className:"w-full",children:y?e.jsx(M,{className:"h-4 w-4 animate-spin"}):"Update Product"})]})]})})}function T({items:r,setItems:h}){const[g,o]=x.useState(!1),[b,y]=x.useState(""),[l,k]=x.useState(""),u=(a,t)=>{h(n=>n.map(s=>s._id===a?{...s,quantity:Math.max(1,t)}:s))},d=(a,t)=>{h(n=>n.map(s=>s._id===a?{...s,price:Math.max(0,t)}:s))},f=(a,t)=>{h(n=>n.map(s=>s._id===a?{...s,priceCost:Math.max(0,t)}:s))},j=(a,t)=>{h(n=>n.map(s=>s._id===a?{...s,priceWolesale:Math.max(0,t)}:s))},v=a=>{h(t=>t.filter(n=>n._id!==a))},p=r.reduce((a,t)=>a+t.price*t.quantity,0),_=async()=>{var a,t;o(!0),console.log({items:r,total:p,customerName:b,customerPhone:l});try{const n=await P.post("https://paynet-1.onrender.com/api/invoice/create-invoice",{items:r,total:p,customerName:b,customerPhone:l});alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!")}catch(n){console.log(n),alert(((t=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:t.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©")}finally{o(!1)}};return e.jsxs("div",{className:"border rounded-xl p-4 bg-white shadow-md space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸ§¾ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),r.length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}),e.jsxs("div",{children:[e.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full",value:b,onChange:a=>y(a.target.value),type:"text",required:!0,placeholder:" . . . Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"}),e.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full my-2",value:l,onChange:a=>k(a.target.value),type:"number",placeholder:" . . . Ø±Ù‚Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†"})]}),r.map(a=>e.jsxs("div",{className:"grid grid-cols-7 gap-3 items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:a.name}),e.jsx("input",{type:"number",value:a.price,onChange:t=>d(a._id,Number(t.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",value:a.priceCost,onChange:t=>f(a._id,Number(t.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",value:a.priceWolesale,onChange:t=>j(a._id,Number(t.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx("input",{type:"number",min:1,value:a.quantity,onChange:t=>u(a._id,Number(t.target.value)),className:"border rounded px-2 py-1 text-sm"}),e.jsx(w,{size:"sm",variant:"destructive",onClick:()=>v(a._id),children:e.jsx(I,{className:"h-4 w-4"})})]},a._id)),e.jsxs("div",{className:"flex justify-between border-t pt-3 font-bold",children:[e.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:"}),e.jsxs("span",{className:"text-green-600",children:[p.toFixed(2)," $"]})]}),e.jsx("button",{onClick:_,disabled:g,className:`
    w-full font-bold px-4 py-2 rounded mt-4 text-white
    ${g?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}
  `,children:g?"Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©...":"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©"})]})}const V=N.object({name:N.string().trim().min(2,"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø·Ù„ÙˆØ¨"),price:N.coerce.number().positive("Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ ØºÙŠØ± ØµØ§Ù„Ø­"),priceCost:N.coerce.number().positive("Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ© ØºÙŠØ± ØµØ§Ù„Ø­"),priceWholesale:N.coerce.number().positive("Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø© ØºÙŠØ± ØµØ§Ù„Ø­"),category:N.string().trim().min(1,"Ø§Ù„ØªØµÙ†ÙŠÙ Ù…Ø·Ù„ÙˆØ¨"),stock:N.coerce.number().int().min(0,"Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± ØµØ§Ù„Ø­Ø©"),description:N.string().trim().max(500).optional(),imageUrl:N.string().url("Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© ØºÙŠØ± ØµØ§Ù„Ø­")}).refine(r=>r.price>=r.priceCost,{message:"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ©",path:["price"]});function A({isOpen:r,setIsOpen:h}){var j,v,p,_,a,t,n,s;const[g,o]=x.useState(null),[b,y]=x.useState(!1),{register:l,handleSubmit:k,reset:u,formState:{errors:d}}=q({resolver:z(V),defaultValues:{stock:0}}),f=async c=>{var i,m;o(null);try{y(!0),await P.post("https://paynet-1.onrender.com/api/product/add",{name:c.name,price:c.price,description:c.description,category:c.category,imageUrl:c.imageUrl,priceCost:c.priceCost,priceWolesale:c.priceWholesale}),o({type:"success",text:"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"}),u()}catch(S){const W=((m=(i=S==null?void 0:S.response)==null?void 0:i.data)==null?void 0:m.message)||S.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸";o({type:"error",text:W})}finally{y(!1)}};return e.jsx(B,{isOpen:r,setIsOpen:h,trigger:e.jsx(w,{className:"w-full",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬"}),children:e.jsxs("form",{dir:"rtl",onSubmit:k(f),className:"grid grid-cols-2 gap-3",children:[e.jsx(C,{label:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",type:"text",...l("name"),error:(j=d.name)==null?void 0:j.message}),e.jsx(C,{label:"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹",type:"number",step:"0.01",...l("price"),error:(v=d.price)==null?void 0:v.message}),e.jsx(C,{label:"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡",type:"number",step:"0.01",...l("priceCost"),error:(p=d.priceCost)==null?void 0:p.message}),e.jsx(C,{label:"Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©",type:"number",step:"0.01",...l("priceWholesale"),error:(_=d.priceWholesale)==null?void 0:_.message}),e.jsx(C,{label:"Ø§Ù„ØªØµÙ†ÙŠÙ",type:"text",...l("category"),error:(a=d.category)==null?void 0:a.message}),e.jsx(C,{label:"Ø§Ù„ÙƒÙ…ÙŠØ©",type:"number",...l("stock"),error:(t=d.stock)==null?void 0:t.message}),e.jsx(C,{label:"Ø§Ù„ÙˆØµÙ",type:"text",...l("description"),error:(n=d.description)==null?void 0:n.message}),e.jsx(C,{label:"Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©",type:"text",...l("imageUrl"),error:(s=d.imageUrl)==null?void 0:s.message}),e.jsx(w,{className:"col-span-2",type:"submit",disabled:b,children:b?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬"}),g&&e.jsx("p",{className:`text-sm mt-2 ${g.type==="error"?"text-red-500":"text-green-600"}`,children:g.text})]})})}function se(){const[r,h]=x.useState([]),[g,o]=x.useState(null),[b,y]=x.useState(null),[l,k]=x.useState(!1),[u,d]=x.useState([]),[f,j]=x.useState(!1),v=[{key:"name",label:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",sortable:!0},{key:"price",label:"Ø³Ø¹Ø± Ø§Ù„Ù…Ø¨ÙŠØ¹",sortable:!0},{key:"priceCost",label:"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡",sortable:!0},{key:"priceWolesale",label:"Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©",sortable:!0},{key:"category",label:"Ø§Ù„ØµÙ†Ù"},{key:"stock",label:"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"},{key:"description",label:"Ø§Ù„ÙˆØµÙ"},{key:"imageUrl",label:"Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©"}],p="https://paynet-1.onrender.com",_=async()=>{var s,c;try{const i=await P.get(`${p}/api/product/get-product`);console.log(i.data),h(i.data)}catch(i){console.log(i),alert(((c=(s=i==null?void 0:i.response)==null?void 0:s.data)==null?void 0:c.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}};x.useEffect(()=>{_()},[]);const a=async s=>{var c,i;try{if(!window.confirm("Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ§ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬"))return;o(s),await P.delete(`${p}/api/product/delete-product/${s}`),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),h(S=>S.filter(W=>W._id!==s))}catch(m){console.log(m),alert(((i=(c=m==null?void 0:m.response)==null?void 0:c.data)==null?void 0:i.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù")}finally{o(null)}},t=()=>{alert(l?"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©":"ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ù† Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"),k(!l)},n=s=>{d(c=>c.find(m=>m._id===s._id)?c.map(m=>m._id===s._id?{...m,quantity:m.quantity+1}:m):[...c,{_id:s._id,name:s.name,price:s.price,priceCost:s.priceCost,priceWolesale:s.priceWolesale,quantity:1}])};return e.jsxs($,{children:[b&&e.jsx(E,{product:b,onClose:()=>y(null),onUpdated:s=>{h(c=>c.map(i=>i._id===s._id?s:i)),y(null)}}),e.jsx("div",{className:"mb-8 p-6 rounded-xl border border-gray-200 bg-white shadow-sm",children:e.jsxs("div",{className:"flex text-right flex-col md:flex-row-reverse md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø³Ù‡ÙˆÙ„Ø©"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(A,{isOpen:f,setIsOpen:j}),e.jsxs(w,{variant:"outline",onClick:()=>t(),children:[l?"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©":"Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l?e.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{d:"M12 5v14M5 12h14"})})]})]})]})}),e.jsx(L,{title:"Products",description:"All available products",columns:v,data:r,renderRowActions:s=>e.jsx("div",{className:"flex gap-2",children:l?e.jsx(w,{onClick:()=>n(s),size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"}):e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:()=>y(s),size:"sm",variant:"outline",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(w,{onClick:()=>a(s._id),size:"sm",variant:"destructive",disabled:g===s._id,children:g?e.jsx(M,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(I,{className:"h-4 w-4"})})]})})}),l&&e.jsx(T,{items:u,setItems:d})]})}export{se as default};
