import{p as f,r as m,m as x,j as s,q as y,J as p}from"./index-DeUUlL9l.js";import{B as w}from"./button-BbuLOj8Q.js";import{I as u}from"./input-BSkmp32h.js";import{C as j}from"./card-B7FlCwkI.js";async function v({username:o,password:r}){try{return(await f.post("/api/auth/login",{username:o,password:r})).data}catch(a){console.error("خطأ في تسجيل الدخول:",a)}}function L(){const[o,r]=m.useState(""),[a,d]=m.useState(""),l=x(),g=async t=>{var c,i;t.preventDefault();try{const n=await y.post("https://paynet-1.onrender.com/api/login",{email:"andrehdaher",password:"Aa123123"}),e=await v({username:o,password:a});e!=null&&e.message.includes("successful")?(localStorage.setItem("DaherUser",JSON.stringify(e.user)),e.user.role=="employee"?l("/invoices"):l("/dashboard")):(console.log(e),p.error((e==null?void 0:e.error)||"فشل تسجيل الدخول"));const h=n.data.token;localStorage.setItem("token",h)}catch(n){console.log(((i=(c=n.response)==null?void 0:c.data)==null?void 0:i.message)||"حدث خطأ ما. حاول مرة أخرى."),p.error("حدث خطأ ما. حاول مرة أخرى.");return}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:s.jsxs(j,{className:"p-8 rounded-xl shadow-xl w-full max-w-md space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-center",children:"Login"}),s.jsxs("form",{onSubmit:g,className:"space-y-4",autoComplete:"off",children:[s.jsx(u,{type:"text",placeholder:"Username",value:o,onChange:t=>r(t.target.value),autoComplete:"new-username"}),s.jsx(u,{type:"password",placeholder:"Password",value:a,onChange:t=>d(t.target.value),autoComplete:"new-password"}),s.jsx(w,{variant:"secondary",type:"submit",className:"w-full",children:"Login"})]})]})})}export{L as default};
