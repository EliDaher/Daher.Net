import{c as k,r as o,j as a}from"./index-BDEvpPy0.js";import{D as p}from"./DataTable-BgnFipeW.js";import{S as u}from"./StatsCard-BRNmnej6.js";import{D as y}from"./DashboardLayout-CI8m_gX9.js";import{c as S,b as D}from"./balance-DwEg57Mm.js";import{u as f}from"./useQuery-D7kiyVYs.js";import{P as L}from"./plus-LclPNTsc.js";import"./card-en6WJuJj.js";import"./button-BLetExgu.js";import"./input-CK_vWQXP.js";import"./house-B8Ikywws.js";import"./axios-KE4dpIQc.js";import"./index-xsH4HHeE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=k("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);function Z(){const{data:l,isLoading:b}=f({queryKey:["dailyBalance-table"],queryFn:S}),{data:t,isLoading:q}=f({queryKey:["todayBalance-table"],queryFn:()=>D("all",new Date().toISOString().split("T")[0])}),B=[{key:"total",label:"الكمية",sortable:!0},{key:"date",label:"الوقت",sortable:!0}],h=[{key:"employee",label:"الموظف",sortable:!0},{key:"total",label:"الكمية",sortable:!0}],[i,x]=o.useState(0),[c,g]=o.useState(0),[d,j]=o.useState([]);return o.useEffect(()=>{if(l&&t){let r=0;l.forEach(e=>{r+=e.total}),t.data.forEach(e=>{r+=e.amount}),x(r);let m=0;t.data.forEach(e=>{e.employee!="mahal"&&(m+=e.amount)}),g(m);const E=t.data.reduce((e,s)=>{const n=s.employee;return e[n]||(e[n]=0),e[n]+=s.amount,e},{}),v=Object.entries(E).map(([e,s])=>({employee:e,total:s}));j(v)}},[l,t]),o.useEffect(()=>{console.log(t)},[t]),b?a.jsx(y,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):a.jsx(y,{children:a.jsxs("div",{dir:"rtl",className:"space-y-6",children:[a.jsxs("div",{dir:"rtl",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsx(u,{title:"الرصيد الحالي",value:i||0,description:"",icon:T}),a.jsx(u,{title:"صناديق اليوم",value:c||0,description:"",icon:L})]}),a.jsx(p,{title:"الرصيد",description:`المجموع ${i-c}`,columns:B,data:l?l.reverse():[]}),a.jsx(p,{searchable:!1,title:"",description:"",columns:h,data:d||[]})]})})}export{Z as default};
