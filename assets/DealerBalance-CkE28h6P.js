import{p as u,f as i,r as c,j as s}from"./index-DeUUlL9l.js";import{D as b}from"./DataTable-BqyNnvuC.js";import{D as y}from"./DashboardLayout-BPlQhhSI.js";import"./card-B7FlCwkI.js";import"./button-BbuLOj8Q.js";import"./input-BSkmp32h.js";import"./house-tY2-Z_zD.js";async function p(){try{const e=await u.get("/api/dealer/getPayments");return Object.values(e.data.Payments).map(t=>{var a;return{...t,subscriberName:(a=t.subscriber)==null?void 0:a.Name}})}catch(e){return console.error("Error adding payment:",e),{success:!1,error:e}}}function N(){const{data:e,isLoading:l}=i({queryKey:["dealerPayments-table"],queryFn:p}),n=[{key:"subscriberName",label:"اسم المشترك",sortable:!0},{key:"Amount",label:"المبلغ",sortable:!0},{key:"Details",label:"التفاصيل",sortable:!0},{key:"Date",label:"الوقت",sortable:!0}],t=c.useMemo(()=>{const a=new Date().getMonth()+1,m=e?Object.values(e).filter(r=>new Date(r.Date).getMonth()+1===a).reduce((r,o)=>Number(r)+Number(o.Amount),0):0;return Math.abs(Number(m))},[e]);return s.jsx(y,{children:s.jsx("div",{dir:"rtl",children:s.jsx(b,{title:"الدفعات",description:"دفعات المشتركين لهذا الشهر "+t,columns:n,data:e?Object.values(e).reverse():[]})})})}export{N as default};
