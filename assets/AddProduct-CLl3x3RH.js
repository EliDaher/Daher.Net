import{r as a,j as t,D as B,F as r,B as U,z as I}from"./index-D8E66CPb.js";function E({isOpen:P,setIsOpen:k}){const[l,m]=a.useState(""),[o,p]=a.useState(0),[i,x]=a.useState(""),[d,g]=a.useState(0),[b,y]=a.useState(""),[c,n]=a.useState(null),[h,v]=a.useState(!1),[u,j]=a.useState(""),C=async e=>{var f,N;if(e.preventDefault(),n(null),!l||!o||!u){n({type:"error",text:"الرجاء تعبئة الاسم والسعر وإضافة رابط الصورة."});return}const D={name:l,price:o,category:i,description:b,imageUrl:u,stock:d};try{v(!0);const S=await I.post("https://paynet-1.onrender.com/api/product/add",D);n({type:"success",text:"تم رفع المنتج بنجاح!"}),m(""),p(0),x(""),y(""),j(""),g(0)}catch(s){console.error(s);const S=((N=(f=s==null?void 0:s.response)==null?void 0:f.data)==null?void 0:N.message)||s.message||"حصل خطأ أثناء الرفع";n({type:"error",text:S})}finally{v(!1)}};return t.jsx(B,{children:t.jsx("div",{children:t.jsxs("form",{action:"",onSubmit:C,className:"flex flex-col",children:[t.jsx(r,{label:"اسم المنتج",type:"text",value:l,onChange:e=>m(e.target.value),className:"mt-2 mb-4"}),t.jsx(r,{label:"سعر المنتج",type:"text",value:o,onChange:e=>p(Number(e.target.value)),className:"mt-2 mb-4"}),t.jsx(r,{label:"صنف المنتج",type:"text",value:i,onChange:e=>x(e.target.value),className:"mt-2 mb-4"}),t.jsx(r,{label:"الكمية",type:"text",value:d,onChange:e=>g(Number(e.target.value)),className:"mt-2 mb-4"}),t.jsx(r,{label:"الوصف",type:"text",value:b,onChange:e=>y(e.target.value),className:"mt-2 mb-4"}),t.jsx(r,{label:"رابط الصورة",type:"text",value:u,onChange:e=>j(e.target.value),className:"mt-2 mb-4"}),t.jsx(U,{type:"submit",disabled:h,children:h?"Uploading...":"Add Product"}),c&&t.jsx("p",{className:`mt-4 ${c.type==="error"?"text-red-500":"text-green-500"}`,children:c.text})]})})})}export{E as default};
